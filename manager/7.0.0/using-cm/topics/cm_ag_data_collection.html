<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.Type" content="concept"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="xd_583c10bfdbd326ba-3ca24a24-13d80143249--7f2e"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Sending Usage and Diagnostic Data to Cloudera</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Sending Usage and Diagnostic Data to Cloudera</h1>
  
  <div class="body conbody">
    
    <p class="p">Cloudera Manager collects anonymous usage information and takes
      regularly-scheduled snapshots of the state of your cluster and
      automatically sends them anonymously to Cloudera. This helps Cloudera
      improve and optimize Cloudera Manager.</p>
    <p class="p">If you have a  license, you can also trigger the collection of diagnostic data and send it to
      Cloudera Support to aid in resolving a problem you may be having.</p>
    <p class="p toc inpage all"></p>
  </div>
  <article class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_zhz_djn_m4">
    <h2 class="title topictitle2" id="ariaid-title2">Configuring a Proxy Server</h2>
  
    <div class="body conbody">
      <p class="p">To configure a proxy server through which usage and diagnostic data is uploaded,
        follow the instructions in
        <a class="xref" href="cm_ag_network.html#xd_583c10bfdbd326ba--6eed2fb8-14349d04bee--76fa">cm_ag_network.html#xd_583c10bfdbd326ba--6eed2fb8-14349d04bee--76fa</a>.</p>
    </div>
  </article>
  <article class="topic concept nested1" aria-labelledby="ariaid-title3" id="cmug_topic_13_11">
    <h2 class="title topictitle2" id="ariaid-title3">Managing Anonymous Usage Data Collection</h2>
    <div class="body conbody">
      <p class="p">Cloudera Manager sends anonymous usage information using Google
        Analytics to Cloudera. The information helps Cloudera improve Cloudera
        Manager. By default, anonymous usage data collection is
        <em class="ph i">enabled</em>.</p>
      <ol class="ol" id="cmug_topic_13_11__ol_rfq_fgb_sk">
        <li class="li" id="cmug_topic_13_11__li_tpr_x3w_kn">Select <span class="ph menucascade"><span class="ph uicontrol">Administration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Settings</span></span>.</li>
        <li class="li">Under the <strong class="ph b">Other</strong> category, set the <strong class="ph b">Allow Usage Data Collection</strong>
          property.</li>
        
      </ol>
    </div>
  </article>
  
  <article class="topic concept nested1" aria-labelledby="ariaid-title4" id="cmug_topic_15_4">
    <h2 class="title topictitle2" id="ariaid-title4">Diagnostic Data Collection</h2>
    <div class="body conbody">
<p class="p">To help with solving problems when using Cloudera Manager on your cluster, Cloudera Manager collects diagnostic data on a regular schedule, and automatically sends it to Cloudera. By default Cloudera Manager is configured to collect this data weekly and to send it <em class="ph i">automatically</em>. Cloudera analyzes this data and uses it to improve the software. If Cloudera discovers a serious issue, Cloudera searches this diagnostic data and notifies customers with Cloudera Enterprise licenses who might encounter problems due to the issue. You can schedule the frequency of data collection on a daily, weekly, or monthly schedule, or disable the scheduled collection of data entirely. You can also send a collected data set <a class="xref" href="#cmug_topic_15_4_2">manually</a>.</p>
<p class="p">Automatically sending diagnostic data requires the Cloudera Manager Server
        host to have Internet access, and be configured for sending data
        automatically. If your Cloudera Manager Server does not have Internet
        access, and you have a  license, you can manually send the diagnostic data as described in
          <a class="xref" href="#cmug_topic_15_4_2__section_kqk_ydv_4n">Manually Triggering Collection and Transfer of Diagnostic Data to Cloudera</a>.</p>
<p class="p">Automatically sending diagnostic data might fail sometimes and return an error message of "Could not send data to Cloudera." To work around this issue, you can manually send the data to Cloudera Support.</p>
<section class="section" id="cmug_topic_15_4__section_fk5_qjw_kn"><h3 class="title sectiontitle">What Data Does Cloudera Manager Collect?</h3>

<div class="p">Cloudera Manager collects and returns a significant amount of information about the health and performance of the cluster. It includes:<ul class="ul" id="cmug_topic_15_4__ul_ihf_ggb_sk">
<li class="li">Up to 1000 Cloudera Manager audit events: Configuration changes, add/remove of users, roles, services, and so on.</li>
<li class="li">One day's worth of Cloudera Manager events: This includes critical errors Cloudera Manager watches for and more.</li>
<li class="li">Data about the cluster structure which includes a list of all hosts, roles, and services along with the configurations that are set through Cloudera Manager. Where passwords are set in Cloudera Manager, the passwords are not returned.</li>
<li class="li">Cloudera Manager license and version number.</li>
<li class="li">Current health information for hosts, service, and roles. Includes results of health tests run by Cloudera Manager.</li>
<li class="li">Heartbeat information from each host, service, and role. These include status and some information about memory, disk, and processor usage.</li>
<li class="li">The results of running Host Inspector.</li>
<li class="li">One day's worth of Cloudera Manager metrics. If you are using , host metrics are not included.</li>
<li class="li">A download of the debug pages for Cloudera Manager roles.</li>
<li class="li">For each host in the cluster, the result of running a number of system-level commands on that host.</li>
<li class="li">Logs from each role on the cluster, as well as the Cloudera Manager server and agent logs.</li>
<li class="li">Which parcels are activated for which clusters.</li>
<li class="li">Whether there's an active trial, and if so, metadata about the trial.</li>
<li class="li">Metadata about the Cloudera Manager Server, such as its JMX metrics, stack
              traces, and the database or host it's running with.</li>
<li class="li">HDFS or Hive replication schedules (including command history) for the deployment.</li>
<li class="li">Impala query logs.</li>
            <li class="li">Cloudera Data Science Workbench collects aggregate usage data by
              sending limited tracking events to Google Analytics and Cloudera
              servers. No customer data or personal information is sent as part
              of these bundles.</li>
</ul></div>
</section>
<section class="section" id="cmug_topic_15_4__section_vrf_sjw_kn"><h3 class="title sectiontitle">Configuring the Frequency of Diagnostic Data Collection</h3>

<p class="p">By default, Cloudera Manager collects diagnostic data on a weekly basis. You can change the frequency to daily, weekly, monthly, or never. If you are a  customer and you set the schedule to <strong class="ph b">never</strong>, you can still collect and send data to Cloudera on demand. If you are a  customer and you set the schedule to <strong class="ph b">never</strong>, data is not collected or sent to Cloudera.</p>
<ol class="ol" id="cmug_topic_15_4__ol_lgf_ggb_sk">
<li class="li">Select <span class="ph menucascade"><span class="ph uicontrol">Administration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Settings</span></span>.</li>
<li class="li">Under the <strong class="ph b">Support</strong> category, click <strong class="ph b">Scheduled Diagnostic Data Collection Frequency</strong> and select the frequency.</li>
<li class="li">To set the day and time of day that the collection will be performed, click <strong class="ph b">Scheduled Diagnostic Data Collection Time</strong> and specify the date and time in the pop-up control.</li>

</ol>
<p class="p">You can see the current setting of the data collection frequency by viewing <span class="ph menucascade"><span class="ph uicontrol">Support</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Scheduled Diagnostics:</span></span> in the main navigation bar.</p>
</section>
<section class="section" id="cmug_topic_15_4__section_ug2_l3w_kn"><h3 class="title sectiontitle">Specifying the Diagnostic Data Directory</h3>

<p class="p">You can configure the directory where collected data is stored.</p>
<ol class="ol" id="cmug_topic_15_4__ol_wh2_l3w_kn">
<li class="li">Select <span class="ph menucascade"><span class="ph uicontrol">Administration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Settings</span></span>.</li>
<li class="li">Under the <strong class="ph b">Support</strong> category, set the <strong class="ph b">Diagnostic Data Bundle Directory</strong> to a directory on the host running Cloudera Manager Server. The directory must exist and be enabled for writing by the user <code class="ph codeph">cloudera-scm</code>. If this field is left blank, the data is stored in <code class="ph codeph">/tmp</code>.</li>

</ol>
</section>
      <section class="section" id="cmug_topic_15_4__section_c4z_kpv_sy"><h3 class="title sectiontitle">Redaction of Sensitive Information from Diagnostic
          Bundles</h3>
        
        <p class="p">By default, Cloudera Manager redacts known sensitive information from
          inclusion in diagnostic bundles. Cloudera Manager uses a set of
          standard rules to redact passwords and secrets. You can add additional
          redaction rules using regular expressions to specify data you want to
          be redacted from the bundles. </p>
        <div class="p">To specify redaction rules for diagnostic bundles:<ol class="ol" id="cmug_topic_15_4__ol_wp1_lqv_sy">
            <li class="li">Go to
                  <span class="ph menucascade"><span class="ph uicontrol">Administration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Settings</span></span>
              and search for the <span class="ph uicontrol">Redaction Parameters for Diagnostic
                Bundles</span> parameter. <p class="p">The edit screen for the
                property displays.</p></li>
            <li class="li">To add a new rule, click the <img class="image" id="cmug_topic_15_4__image_ofg_tqv_sy" src="../images/add.png"> icon. You can add one of the
                following:<ol class="ol" type="a" id="cmug_topic_15_4__ol_afp_5qv_sy">
                <li class="li"><span class="ph uicontrol">Credit Card numbers (with
                  separator)</span></li>
                <li class="li"><span class="ph uicontrol">Social Security Card numbers (with
                    separator)</span></li>
                <li class="li"><span class="ph uicontrol">Email addresses</span></li>
                <li class="li"><span class="ph uicontrol">Custom rule</span> (You must supply values
                  for the <span class="ph uicontrol">Search</span> and
                    <span class="ph uicontrol">Replace</span> fields, and optionally, the
                    <span class="ph uicontrol">Trigger</span> field.)</li>
              </ol></li>
            <li class="li">To modify a new rule, click the <img class="image" id="cmug_topic_15_4__image_ujr_jsv_sy" src="../images/right_arrow.jpeg" height="NaN" width="NaN"> icon.</li>
            <li class="li">Edit the redaction rules as needed. Each rule has a description
              field where you can enter free text describing the rule and you
              can modify the following three fields:</li>
            <li class="li">To delete a redaction rule, click the <img class="image" id="cmug_topic_15_4__image_hsl_xrv_sy" src="../images/delete.png"> icon.</li>
            <li class="li">Click <span class="ph uicontrol">Save Changes</span>.</li>
          </ol></div>
      </section>
</div>
    <article class="topic concept nested2" aria-labelledby="ariaid-title5" id="cmug_topic_15_4_2">
      <h3 class="title topictitle3" id="ariaid-title5">Collecting and Sending Diagnostic Data to Cloudera</h3>
      <div class="body conbody">
        
        <section class="section" id="cmug_topic_15_4_2__section_hqt_lct_lm"><h4 class="title sectiontitle">Disabling the Automatic Sending of Diagnostic Data from a Manually Triggered Collection</h4>

<p class="p">If you do not want data automatically sent to Cloudera after manually triggering data collection, you can disable this feature. The data you collect will be saved and can be downloaded for sending to Cloudera Support at a later time.</p>
<ol class="ol" id="cmug_topic_15_4_2__ol_chf_ggb_sk">
<li class="li">Select <span class="ph menucascade"><span class="ph uicontrol">Administration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Settings</span></span>.</li>
<li class="li">Under the <strong class="ph b">Support</strong> category, uncheck the box for <strong class="ph b">Send Diagnostic Data to Cloudera Automatically</strong>.</li>

</ol>
</section>
        <section class="section" id="cmug_topic_15_4_2__section_kqk_ydv_4n"><h4 class="title sectiontitle">Manually Triggering Collection and Transfer of Diagnostic Data to Cloudera</h4>
          
<p class="p">To troubleshoot specific problems, or to re-send an automatic bundle that failed to send, you can manually send diagnostic data to Cloudera:</p>
          <ol class="ol" id="cmug_topic_15_4_2__ol_lf1_pfh_3k">
            <li class="li">Optionally, change the System Identifier property:<ol class="ol" type="a" id="cmug_topic_15_4_2__ol_opj_2ks_4n">
<li class="li">Select <span class="ph menucascade"><span class="ph uicontrol">Administration</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Settings</span></span>.</li>
<li class="li">Under the <strong class="ph b">Other</strong> category, set the System Identifier property and click <strong class="ph b">Save Changes</strong>.</li>
</ol></li>
            <li class="li" id="cmug_topic_15_4_2__li_y2h_tdt_lm">Under the <strong class="ph b">Support</strong> menu at the top right of the navigation bar, choose <strong class="ph b">Send Diagnostic Data</strong>. The Send Diagnostic Data form displays.</li>
            <li class="li" id="cmug_topic_15_4_2__li_npn_tdt_lm">Fill in or change the information here as appropriate:<ul class="ul" id="cmug_topic_15_4_2__ul_qg1_pfh_3k">
                <li class="li">Optionally, you can improve performance by reducing the size
                  of the data bundle that is sent. Click <strong class="ph b">Restrict log and
                    metrics collection</strong> to expand this section of the form.
                  The three filters, <strong class="ph b">Host</strong>, <strong class="ph b">Service</strong>, and <strong class="ph b">Role
                    Type</strong>, allow you to restrict the data that will be sent.
                  Cloudera Manager will only collect logs and metrics for roles
                  that match all three filters.</li>
<li class="li">Select one of the following under <span class="ph uicontrol">Data Selection</span>:<ul class="ul" id="cmug_topic_15_4_2__ul_izw_ntp_fw">
<li class="li">Select <span class="ph uicontrol">By Target Size</span> to manually set the maximum size of the bundle. Cloudera Manager populates the <strong class="ph b">End Time</strong> based on the setting of the Time Range selector. You should change this to be a few minutes after you observed the problem or condition that you are trying to capture. The time range is based on the timezone of the host where Cloudera Manager Server is running.</li>
<li class="li">Select <span class="ph uicontrol">By Date Range</span> to manually set the <span class="ph uicontrol">Start Time</span> and <span class="ph uicontrol">End Time</span> to collect the diagnostic data. Click the <span class="ph uicontrol">Estimate</span> button to calculate the size of the bundle based on the start and end times. If the bundle is too large, narrow the selection using the start and end times or by selecting additional filters.</li>
</ul></li>
                <li class="li">If you have a support ticket open with Cloudera Support, include the support
                  ticket number in the field provided.</li>
              </ul></li>
            <li class="li">Depending on whether you have disabled automatic sending of data, do one of the
              following:<ul class="ul" id="cmug_topic_15_4_2__ul_akc_5js_4n">
                <li class="li">Click <strong class="ph b">Collect and Upload Diagnostic Data to Cloudera Support</strong>. A Running
                  Commands window shows you the progress of the data collection steps. When these
                  steps are complete, the collected data is sent to Cloudera.</li>
                <li class="li">Click <strong class="ph b">Collect Diagnostic Data only</strong>. A Command Details window shows you
                  the progress of the data collection steps.<ol class="ol" type="a" id="cmug_topic_15_4_2__ol_lxs_wjs_4n">
                    <li class="li">In the Command Details window, click <strong class="ph b">Download Result Data</strong> to download
                      and save a zip file of the information.</li>
                    <li class="li">Send the data to Cloudera Support by doing one of the following:<ul class="ul" id="cmug_topic_15_4_2__ul_kbw_k2t_lm">
                        <li class="li">Send the bundle using a Python script:<ol class="ol" type="i" id="cmug_topic_15_4_2__ol_tnc_fqv_kn">
                            <li class="li">Download the <a class="xref" href="http://tiny.cloudera.com/cm5-phone-home" target="_blank">phone_home</a> script.</li>
                            <li class="li">Copy the script and the downloaded data file to a host that has
                              Internet access.</li>
                            <li class="li">Run the following command on that
                              host:<pre class="pre codeblock"><code>python phone_home.py --file <var class="keyword varname">downloaded data file</var></code></pre></li>
                          </ol></li>
                        <li class="li">Attach the bundle to the SFDC case. Do not rename the bundle as this can
                          cause a delay in processing the bundle.</li>
                        <li class="li">Contact <a class="xref" href="https://www.cloudera.com/support.html" target="_blank">Cloudera Support</a> and arrange to
                          send the data file.</li>
                      </ul></li>
                  </ol></li>
              </ul></li>
          </ol>
        </section>
      </div>
    </article>
  </article>
</div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>