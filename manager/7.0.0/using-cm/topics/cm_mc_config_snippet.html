<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/cm_mc_service_config_overview.html"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="xd_583c10bfdbd326ba--43d5fd93-1410993f8c2--7ea7"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Custom Configuration</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Custom Configuration</h1>
  
  <div class="body conbody">
    
    <p class="p">Cloudera Manager exposes properties that allow you to insert custom configuration text into XML configuration, property, and text files, or into an environment. The naming convention for these properties is: <var class="keyword varname">XXX</var>
      <strong class="ph b">Advanced Configuration Snippet (Safety Valve)</strong> for <var class="keyword varname">YYY</var> or <var class="keyword varname">XXX</var>
      <var class="keyword varname">YYY</var>
      <strong class="ph b">Advanced Configuration Snippet (Safety Valve)</strong>, where <var class="keyword varname">XXX</var> is a service or role and <var class="keyword varname">YYY</var> is the target.</p>
    <p class="p">The values you enter into a configuration snippet must conform to the syntax of
      the target. For an XML configuration file, the configuration snippet must
      contain valid XML property definitions. For a properties file, the
      configuration snippet must contain valid property definitions. Some files
      simply require a list of host addresses.</p>
    <p class="p">The configuration snippet mechanism is intended for use in cases where there is
      configuration setting that is not exposed as a configuration property in
      Cloudera Manager. Configuration snippets generally override normal
      configuration. Contact Cloudera Support if you are required to use a
      configuration snippet that is not explicitly documented.</p>
    <p class="p">Service-wide configuration snippets apply to all roles in the service; a
      configuration snippet for a role group applies to all instances of the
      role associated with that role group.</p>
    <p class="p">Server and client configurations have separate configuration snippets. In
      general after changing a server configuration snippet you must <a class="xref" href="cm_mc_start_stop_service.html#cmug_topic_5_6_1">restart</a> the
      server, and after changing a client configuration snippet you must <a class="xref" href="cm_mc_client_config.html#cmug_topic_5_9_2">redeploy the client
        configuration</a>. Sometimes you can refresh instead of restart. In
      some cases however, you must restart a dependent server after changing a
      client configuration. For example, changing a MapReduce client
      configuration marks the dependent Hive server as <a class="xref" href="cm_mc_stale_configuration.html#xd_583c10bfdbd326ba--6eed2fb8-14349d04bee--7e53">stale</a>, which must be restarted. The Admin Console displays an
      indicator when a server must be restarted. In addition, the All
      Configuration Issues tab on the <a class="xref" href="cm_intro_home.html#xd_583c10bfdbd326ba--7f25092b-13fba2465e5--7f7c">Home</a> page indicates the actions you must perform to resolve
        <a class="xref" href="cm_mc_stale_configuration.html#xd_583c10bfdbd326ba--6eed2fb8-14349d04bee--7e53">stale configurations</a>.</p>
    <p class="p toc inpage"></p>
    <section class="section" id="xd_583c10bfdbd326ba--43d5fd93-1410993f8c2--7ea7__section_bvq_k5r_np"><h2 class="title sectiontitle">Configuration Snippet Types and Syntax</h2>
      


      <dl class="dl">
        
          <dt class="dt dlterm">Configuration</dt>
          <dd class="dd">Set configuration properties in various configuration files; the
            property name indicates into which configuration file the
            configuration will be placed. Configuration files have the extension
              <code class="ph codeph">.xml</code> or <code class="ph codeph">.conf</code>.<p class="p">For example,
              there are several configuration snippets for the Hive service. One
              Hive configuration snippet property is called the <strong class="ph b">HiveServer2
                Advanced Configuration Snippet for hive-site.xml</strong>;
              configurations you enter here are inserted verbatim into the
                <code class="ph codeph">hive-site.xml</code> file associated with the
              HiveServer2 role group.</p><p class="p">To see a list of configuration
              snippets that apply to a specific configuration file, enter the
              configuration file name in the Search field in the top navigation
              bar. For example, searching for <code class="ph codeph">mapred-site.xml</code>
              shows the configuration snippets that have
                <code class="ph codeph">mapred-site.xml</code> in their name.</p><p class="p">Some
              configuration snippet descriptions include the phrase <em class="ph i">for this
                role only</em>. These configurations are stored in memory, and
              only inserted to the configuration when running an application
              from Cloudera Manager. Otherwise, the configuration changes are
              added to the configuration file on disk, and are used when running
              the application both from Cloudera Manager and from the command
              line.</p>
            <p class="p"><strong class="ph b">Syntax:</strong></p><pre class="pre">&lt;property&gt;
  &lt;name&gt;<var class="keyword varname">property_name</var>&lt;/name&gt; 
  &lt;value&gt;<var class="keyword varname">property_value</var>&lt;/value&gt;
&lt;/property&gt;</pre>For
            example, to specify a MySQL connector library, put this property
            definition in that configuration
            snippet:<pre class="pre">&lt;property&gt;
  &lt;name&gt;hive.aux.jars.path&lt;/name&gt; 
  &lt;value&gt;file:///usr/share/java/mysql-connector-java.jar&lt;/value&gt;
&lt;/property&gt;</pre>
          </dd>
        
        
          <dt class="dt dlterm">Environment</dt>
          <dd class="dd">Specify key-value pairs for a service, role, or client that
            are inserted into the respective environment.<p class="p">One example of
              using an environment configuration snippet is to add a JAR to
              a classpath. Place JARs in a custom location such as
              <code class="ph codeph">/opt/myjars</code> and extend the classpath using
              the appropriate service environment configuration snippet. The
              value of a JAR property must conform to the syntax supported
              by its environment. See <a class="xref" href="http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/classpath.html" target="_blank">Setting the class
                path</a>.</p><p class="p">Do not place JARs inside locations such as
                  <code class="ph codeph">/opt/cloudera</code> or
                  <code class="ph codeph">/usr/lib/</code><code class="ph codeph">{hadoop*,hbase*,hive*}</code>
                  that are managed by Cloudera because they are overwritten at
                  upgrades.</p>
                  <p class="p"><strong class="ph b">Syntax:</strong></p>
                  <pre class="pre"><var class="keyword varname">key</var>=<var class="keyword varname">value</var></pre>
                  <div class="p">For example, to add JDBC connectors to a Hive gateway classpath,
                    add
                    <pre class="pre">AUX_CLASSPATH=/usr/share/java/mysql-connector-java.jar:\
/usr/share/java/oracle-connector-java.jar</pre>
                    or
                    <pre class="pre">AUX_CLASSPATH=/usr/share/java/*</pre>
                    to <strong class="ph b">Gateway Client Advanced Configuration Snippet for
                      hive-env.sh</strong>.</div>
          </dd>
        
        
          <dt class="dt dlterm">Logging</dt>
          <dd class="dd">Set <a class="xref" href="https://logging.apache.org/log4j/1.2/manual.html" target="_blank">log4j</a> properties in a
            <code class="ph codeph">log4j.properties</code> file.
            <p class="p"><strong class="ph b">Syntax:</strong></p>
            <pre class="pre"><var class="keyword varname">key1</var>=<var class="keyword varname">value1</var>
<var class="keyword varname">key2</var>=<var class="keyword varname">value2</var></pre>
            For example:
            <pre class="pre">log4j.rootCategory=INFO, console max.log.file.size=200MB
max.log.file.backup.index=10</pre>
          </dd>
        
        
          <dt class="dt dlterm">Metrics</dt>
          <dd class="dd">Set properties to configure Hadoop metrics in a
            <code class="ph codeph">hadoop-metrics.properties</code> or
            <code class="ph codeph">hadoop-metrics2.properties</code> file.
            <p class="p"><strong class="ph b">Syntax:</strong></p>
            <pre class="pre"><var class="keyword varname">key1</var>=<var class="keyword varname">value1</var>
<var class="keyword varname">key2</var>=<var class="keyword varname">value2</var></pre>For example:<pre class="pre">*.sink.foo.class=org.apache.hadoop.metrics2.sink.FileSink
namenode.sink.foo.filename=/tmp/namenode-metrics.out
secondarynamenode.sink.foo.filename=/tmp/secondarynamenode-metrics.out</pre>
          </dd>
        
        
          <dt class="dt dlterm">Whitelists and blacklists</dt>
          <dd class="dd">Specify a list of host addresses that are allowed or disallowed from accessing a
            service.<p class="p"><strong class="ph b">Syntax:</strong></p>
            <pre class="pre">host1.domain1 host2.domain2</pre>
          </dd>
        
      </dl>




    </section>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/cm_mc_service_config_overview.html">Cluster Configuration Overview</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>