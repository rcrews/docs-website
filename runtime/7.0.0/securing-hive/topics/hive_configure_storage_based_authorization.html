<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="task"><meta name="description" content="You need to set parameters in hive-site.xml to enable storage-based authorization (SBA)."><meta name="DC.Relation" scheme="URI" content="../topics/hive_sba_permissions_model.html"><meta name="DC.Relation" scheme="URI" content="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization#LanguageManualAuthorization-1StorageBasedAuthorizationintheMetastoreServer"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_configure_storage_based_authorization"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Configure storage-based authorization</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Configure storage-based
      authorization</h1>
   
   <div class="body taskbody"><p class="shortdesc">You need to set parameters in <span class="ph filepath">hive-site.xml</span> to enable
      storage-based authorization (SBA).</p>
      <section class="section context">Hive performs authorization checks on the client, rather than the server when you use
         SBA. This allows malicious users to circumvent these checks. Some metadata operations do
         not check for authorization. See Apache JIRA HIVE-3009. DDL statements for managing
         permissions have no effect on storage-based authorization, but they do not return error
         messages (HIVE-3010).</section>
      <div class="section prereq p"><ul class="ul">
         <li class="li">You obtained admin role privileges.</li>
      </ul></div>
 
     <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">
          Set authorization configuration parameters in the
                      <span class="ph filepath">hive-site.xml</span> to enable storage-based
                    authorization.
         </span>
            <div class="itemgroup stepxmp">
                  <pre class="pre codeblock"><code>&lt;property&gt;
   &lt;name&gt;hive.security.authorization.enabled&lt;/name&gt;
   &lt;value&gt;false&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
   &lt;name&gt;hive.security.authorization.manager&lt;/name&gt;
   &lt;value&gt;org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
   &lt;name&gt;hive.server2.enable.doAs&lt;/name&gt;
   &lt;value&gt;true&lt;/value&gt;
&lt;/property&gt;

&lt;property&gt;
   &lt;name&gt;hive.metastore.pre.event.listeners&lt;/name&gt;
   &lt;name&gt;org.apache.hadoop.hive.ql.security.authorization.AuthorizationPreEventListener&lt;/name&gt;
&lt;/property&gt;

&lt;property&gt;
   &lt;name&gt;hive.security.metastore.authorization.manager&lt;/name&gt;
   &lt;value&gt;org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider&lt;/value&gt;
&lt;/property&gt;</code></pre>
            </div>
         </li><li class="li step stepexpand">
           <span class="ph cmd">Determine the required permissions of the tables and databases in your
              environment.</span>
        </li><li class="li step stepexpand">
   <span class="ph cmd">Create a table or database in the Hive, then manually modify the
      POSIX permissions using the HDFS file system commands.</span>
   
   
</li></ol>
     
   </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/hive_sba_permissions_model.html" title="As administrator, you must understand the permissions model supported in CDP Data Center and later. If you do not use Ranger for security, you need to add users to an HDFS access control list to permit access to the Hive warehouse for running DML queries.">HDFS ACL permissions model</a></div></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization#LanguageManualAuthorization-1StorageBasedAuthorizationintheMetastoreServer" target="_blank">Storage-based authorization information on the Apache Wiki</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>