<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="As administrator, you must set up one of several authorization options to allow users to access external tables."><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_transactional_table_access.html"><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_spark_access_to_hive.html"><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_sba_permissions_model.html"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_external_table_access"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>External table access</title><script type="application/javascript">
      
      
    //The id for tree cookie
    var treeCookieId = "treeview-bk_release-notes";
    var language = "en";
    var w = new Object();
    //Localization
    txt_filesfound = 'Results';
    txt_enter_at_least_1_char = "You must enter at least one character.";
    txt_browser_not_supported = "Please enable JavaScript.";
    txt_please_wait = "Please wait. Search in progress...";
    txt_results_for = "Results for: ";
    
    
    </script><script type="application/javascript" src="https://code.jquery.com/jquery-1.4.3.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery-ui-1.8.2.custom.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.cookie.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.treeview.min.js"></script><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"><script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js" type="application/javascript"></script><script type="application/javascript" src="/common/js/navigation.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/main.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileInfoList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/nwSearchFnt.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/en_stemmer.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-1.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-2.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-3.js"></script><script type="application/javascript">
      
      
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-22950817-19', 'auto');
    ga('send', 'pageview');
    
    
    </script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/plugins.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/scripts.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" type="application/javascript"></script><script type="application/javascript">
      
    // PAGE SPECIFIC SCRIPTS
    
    $('.chapters>li .dropdown').click(function () {
    var $arrow = $(this).find('i.fa');
    if( $arrow.hasClass('fa-chevron-down')) {
    $(this).siblings('.sections').show();
    $arrow.removeClass('fa-chevron-down').addClass('fa-chevron-up');
    } else {
    console.log('up');
    $(this).siblings('.sections').hide();
    $arrow.removeClass('fa-chevron-up').addClass('fa-chevron-down');
    }
    });
    
    //  $('h3').on('mouseenter',function() {
    //      console.log('received mouseover');
    //      $(this).find('.hash-link').show();
    //  });
    
    //  $('h3').on('mouseleave',function() {
    //      $(this).find('.hash-link').hide();
    //  });
    
    
    // STICKY SIDEBARs
    var stickySidebar = $('.sticky');
    
    if (stickySidebar.length > 0) {
    var stickyHeight = stickySidebar.height(),
    sidebarTop = stickySidebar.offset().top;
    }
    
    // on scroll move the sidebar
    $(window).scroll(function () {
    if (stickySidebar.length > 0) {
    var scrollTop = $(window).scrollTop();
    console.log
    
    if (sidebarTop < scrollTop) {
    stickySidebar.css('top', scrollTop - sidebarTop);
    
    // stop the sticky sidebar at the footer to avoid overlapping
    var sidebarBottom = stickySidebar.offset().top + stickyHeight,
    stickyStop = $('.main-content').offset().top + $('.main-content').height();
    if (stickyStop < sidebarBottom) {
    var stopPosition = $('.main-content').height() - stickyHeight;
    stickySidebar.css('top', stopPosition);
    }
    }
    else {
    stickySidebar.css('top', '0');
    }
    }
    });
    
    $(window).resize(function () {
    if (stickySidebar.length > 0) {
    stickyHeight = stickySidebar.height();
    }
    });
    
    // Initialize Syntax Highlighting
    hljs.initHighlightingOnLoad();
    
    </script><style type="text/css">
      
      
    input {
    margin-bottom: 5px;
    margin-top: 2px;
    }
    
    .folder {
    display: block;
    height: 22px;
    padding-left: 20px;
    background: transparent url(/common/themes/pre-hdp-3.1/images/folder.gif) 0 0px no-repeat;
    }
    
    </style><link href="/common/themes/pre-hdp-3.1/images/favicon.ico" rel="icon" type="image/x-icon" sizes="16x16"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-70x70.png" rel="icon" type="image/x-icon" sizes="32x32"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="icon" type="image/x-icon" sizes="192x192"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="apple-touch-icon-precomposed" type="image/x-icon" sizes="192x192"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css" rel="stylesheet"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/main.css"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/docux.css"><style type="text/css"></style><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery-ui-1.8.2.custom.css"><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery.treeview.css"><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"></head><body class="docs books"><div id="body_container"><div class="breadcrumb_bg"><!-- --></div><div id="navbar"><section class="ps topstrip"><div><!-- --></div></section></div><div id="mainbody"><section class="ps titlebar"><div><div class="breadcrumb"><a href="/">Hortonworks Docs</a> » <a id="index_page" href="../../index.html">Cloudera Runtime 1.0.0</a> » <span class="current_book">Securing Apache Hive</span></div><div class="book_title">Securing Apache Hive</div><div class="ebooks"><div class="formats"><span class="desc">Also available as:</span><div class="format"><a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" title="Download a PDF of this document" class="pdficon" href="../cr-hive_securing_hive.pdf"><img src="/common/themes/pre-hdp-3.1/images/pdf.png" alt="PDF"></a></div></div></div></div></section><div class="lowerbody"><section class="ps doc-content"><div><div class="aside left"><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div class="ui-tabs ui-widget ui-widget-content ui-corner-all"><div id="treeDiv" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><img src="/common/themes/pre-hdp-3.1/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li><a href="../topics/cr-hive_hive_authorization_models.html">Authorizing Apache Hive Access</a></li><li><a href="../topics/cr-hive_sba_permissions_model.html">HDFS ACL permissions model</a><ul><li><a href="../topics/cr-hive_configure_storage_based_authorization.html">Configure storage-based authorization</a></li><li><a href="../topics/cr-hive_authorization_configuration_parameters.html">Authorization configuration parameters</a></li><li><a href="../topics/cr-hive_storage_based_authorization_permissions.html">Storage-based operation permissions</a></li></ul></li><li><a href="../topics/cr-hive_transactional_table_access.html">Transactional table access</a></li><li class="active"><a href="../topics/cr-hive_external_table_access.html">External table access</a></li><li><a href="../topics/cr-hive_spark_access_to_hive.html">Apache Spark access to Apache Hive</a></li><li><a href="../topics/cr-hive_remote_data_access.html">Remote data access</a><ul><li><a href="../topics/cr-hive_secure_hiveserver_using_ldap.html">Secure HiveServer using LDAP</a></li><li><a href="../topics/cr-hive_secure_hiveserver_using_ldap_over_ssl.html">Secure HiveServer using LDAP over SSL</a></li><li><a href="../topics/cr-hive_secure_llap_in_hiveserver.html">Secure LLAP in HiveServer</a></li><li><a href="../topics/cr-hive_connections_to_hive.html">Connections to Apache Hive</a></li></ul></li></ul></div></div></div></div></div><div class="formats"><div class="pdf"><!-- --></div></div></div><div class="next-prev-links"><span class="previouslink"><a class="link" href="../topics/cr-hive_transactional_table_access.html" title="As administrator, you must set file system permissions or enable the Apache Ranger service for authorization of users who want to work with transactional tables, which are the default and ACID-compliant tables in Hive 3 and later.">Prev</a></span><span class="nextlink"><a class="link" href="../topics/cr-hive_spark_access_to_hive.html" title="From Apache Spark, you access ACID v2 tables and external tables in Apache Hive 3 using the Hive Warehouse Connector.">Next</a></span></div><div id="content" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">External table access</h1>
  
  <div class="body conbody"><p class="shortdesc">As administrator, you must set up one of several authorization options to allow users
    to access external tables.</p>
    <p class="p">External tables reside by default in <span class="ph filepath">/warehouse/tablespace/external</span> on
      HDFS. To specify some other location of the external table, you need to include the
      specification in the table creation statement as shown in the following example:</p>
    <div class="p">
      <pre class="pre codeblock"><code>CREATE EXTERNAL TABLE my_external_table (a string, b string)  
LOCATION '/users/andrena';</code></pre>
    </div>
    <p class="p">Hive assigns a default permission of 777 to the <code class="ph codeph">hive</code> user, sets a umask to
      restrict subdirectories, and provides a default ACL to give Hive read and write access to all
      subdirectories. External tables in HDP 3.0 support the following permissions and authorization
      models:</p>
    <ul class="ul">
      <li class="li">SBA</li>
      <li class="li">SBA and Ranger</li>
      <li class="li">Ranger</li>
    </ul>
    <p class="p">You can use the mixed mode, SBA and Ranger, for low-level analytical processing of external
      tables.</p>
    <section class="section"><h2 class="title sectiontitle">Using the SBA permissions model</h2>
      
     
    <p class="p">You must add Access ACLs to allow groups or users to create databases and tables in the space
        governed by SBA. You are authorized to query a table if you have file-level access to the
        underlying data. You configure impersonation in HiveServer to run operations on behalf of an
        end user. You cannot use LLAP.
      </p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Using the SBA and Ranger example</h2>
      
      <p class="p">Assume that you are an administrator who creates a sales database and gives the sales group
        read-write permissions to the <span class="ph filepath">sales</span> directory. This includes Default
        ACLs for the sales group to read from and write to the database. Users in the sales group
        set <code class="ph codeph">doAs=true</code>, and are authorized under SBA to create external tables.
        Given the ACLs, both Hive and sales users can access all files and partitions.</p>
      <p dir="ltr" class="p">To restrict certain users from accessing all files and partitions, you can use
        Ranger. Hive enforces access; however, if you give a sales user fewer options for accessing
        the tables through SBA, for example by setting a user's HDFS access to tables to read-only,
        Ranger cannot control that user's access. </p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Using the Ranger authorization model</h2>
      
      <p class="p">If you disable SBA and use only Ranger to give a specific user, who is not in the sales
        group, permission to create external tables in the sales-report database, the user can log
        in, use LLAP, and create a database. With Default ACLs in place, sales group users can also
        access the table.</p>
    </section>
   
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="../topics/cr-hive_sba_permissions_model.html" title="As administrator, you must understand the permissions model supported in HDP 3.0 and later. If you do not use Ranger for security, you need to add users to an HDFS access control list to permit access to the Hive warehouse for running DML queries.">HDFS ACL permissions model</a></div></div></nav></div></div></section></div></div></div><section class="ps footer"><div><div class="copyright">© 2012–2019, Hortonworks, Inc.</div><div class="license">Document licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative
          Commons Attribution ShareAlike 4.0 License</a>.</div><div class="menulinks"><a href="https://hortonworks.com">Hortonworks.com</a> | 
          <a href="#">Documentation</a> |
          <a href="https://hortonworks.com/support/">Support</a> |
          <a href="https://community.hortonworks.com/">Community</a></div></div></section></body></html>