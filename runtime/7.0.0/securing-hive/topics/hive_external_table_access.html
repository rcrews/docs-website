<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="As administrator, you must set up one of several authorization options to allow users to access external tables."><meta name="DC.Relation" scheme="URI" content="../topics/hive_transactional_table_access.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_spark_access_to_hive.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_sba_permissions_model.html"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_external_table_access"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>External table access</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">External table access</h1>
  
  <div class="body conbody"><p class="shortdesc">As administrator, you must set up one of several authorization options to allow users
    to access external tables.</p>
    <p class="p">External tables reside by default in <span class="ph filepath">/warehouse/tablespace/external</span> on
      HDFS or S3. To specify some other location of the external table, you need to include the
      specification in the table creation statement as shown in the following example:</p>
    <div class="p">
      <pre class="pre codeblock"><code>CREATE EXTERNAL TABLE my_external_table (a string, b string)  
LOCATION '/users/andrena';</code></pre>
    </div>
    <p class="p">Hive assigns a default permission of 777 to the <code class="ph codeph">hive</code> user, sets a umask to
      restrict subdirectories, and provides a default ACL to give Hive read and write access to all
      subdirectories. External tables in CDP Data Center support the following permissions and authorization
      models:</p>
    <ul class="ul">
      <li class="li">SBA</li>
      <li class="li">SBA and Ranger</li>
      <li class="li">Ranger</li>
    </ul>
    <p class="p">You can use the mixed mode, SBA and Ranger, for low-level analytical processing of external
      tables.</p>
    <section class="section"><h2 class="title sectiontitle">Using the SBA permissions model</h2>
      
     
    <p class="p">You must add Access ACLs to allow groups or users to create databases and tables in the space
        governed by SBA. You are authorized to query a table if you have file-level access to the
        underlying data. You configure impersonation in HiveServer to run operations on behalf of an
        end user. You cannot use LLAP.
      </p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Using the SBA and Ranger example</h2>
      
      <p class="p">Assume that you are an administrator who creates a sales database and gives the sales group
        read-write permissions to the <span class="ph filepath">sales</span> directory. This includes Default
        ACLs for the sales group to read from and write to the database. Users in the sales group
        set <code class="ph codeph">doAs=true</code>, and are authorized under SBA to create external tables.
        Given the ACLs, both Hive and sales users can access all files and partitions.</p>
      <p dir="ltr" class="p">To restrict certain users from accessing all files and partitions, you can use
        Ranger. Hive enforces access; however, if you give a sales user fewer options for accessing
        the tables through SBA, for example by setting a user's HDFS access to tables to read-only,
        Ranger cannot control that user's access. </p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Using the Ranger authorization model</h2>
      
      <p class="p">If you disable SBA and use only Ranger to give a specific user, who is not in the sales
        group, permission to create external tables in the sales-report database, the user can log
        in, use LLAP, and create a database. With Default ACLs in place, sales group users can also
        access the table.</p>
    </section>
   
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="../topics/hive_sba_permissions_model.html" title="As administrator, you must understand the permissions model supported in CDP Data Center and later. If you do not use Ranger for security, you need to add users to an HDFS access control list to permit access to the Hive warehouse for running DML queries.">HDFS ACL permissions model</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>