<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="As CDP Data Center administrator, you can choose whether or not to set up Apache Ranger authorization use another authorization model to limit Apache Hive access to approved users."><meta name="DC.Relation" scheme="URI" content="../topics/hive_sba_permissions_model.html"><meta name="DC.Relation" scheme="URI" content="http://docs-stage.cloudera.com/HDPDocuments/CR/CR-1.0.0/authorization-ranger/content/resource_policy_create_a_hive_policy.html"><meta name="DC.Relation" scheme="URI" content="http://docs-stage.cloudera.com/HDPDocuments/CR/CR-1.0.0/authorization-ranger/content/row_level_filtering_and_column_masking_in_hive.html"><meta name="DC.Relation" scheme="URI" content="http://docs-stage.cloudera.com/HDPDocuments/CR/CR-1.0.0/starting-hive/content/hive_start_hive_as_authorized_user.html"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_hive_authorization_models"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Authorizing Apache Hive Access</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Authorizing Apache Hive
      Access</h1>
   

   <div class="body conbody"><p class="shortdesc">As CDP Data Center administrator, you
      can choose whether or not to set up Apache Ranger authorization use another authorization
      model to limit Apache Hive access to approved users.</p>
      <p class="p">Authorization is the process that checks user permissions to perform select operations,
         such as creating, reading, and writing data, as well as editing table metadata. Apache
         Ranger provides centralized authorization for all Cloudera Runtime Services and is recommended. It is best to choose an authorization model based on how your organization uses
         Hive.</p>
      <p class="p">There are two primary use cases for Hive:</p>
      <ul class="ul">
         <li class="li">
            <p class="p">
               <strong class="ph b bold">Using Hive as a table storage layer</strong>
            </p>
            <p class="p">Many Cloudera Runtime services and underlying technologies, such as Apache Hive, Apache HBase, Apache Pig, Apache MapReduce, and Apache Tez rely on Hive as a table storage layer.</p>
         </li>
         <li class="li">
            <p class="p">
               <strong class="ph b bold">Using Hive as a SQL query engine</strong>
            </p>
            <p class="p">Hadoop administrators, business analysts, and data scientists use
               Hive to run SQL queries remotely through a client connecting to Hive through
               HiveServer. These users often configure a data analysis tool, such as Tableau, to
               connect to Hive through HiveServer.</p>


               <br><img class="image" src="../images/hive_HAuthUseCases.png"><br>
          
         </li>
      </ul>
      <p class="p">In addition to Apache Ranger, Hive supports storage-based authorization (SBA) for external
         tables. Ranger and SBA can co-exist in CDP Data Center. The following table compares
         authorization models:</p>
      <table class="table frame-all"><caption></caption><colgroup><col style="width:20%"><col style="width:20%"><col style="width:20%"><col style="width:20%"><col style="width:20%"></colgroup><thead class="thead">
               <tr class="row">
                  <th class="entry colsep-1 rowsep-1" id="hive_hive_authorization_models__entry__1">
                     <p class="p">
                        <strong class="ph b bold">
                           <strong class="ph b bold">Authorization model</strong>
                        </strong>
                     </p>
                  </th>
                  <th class="entry colsep-1 rowsep-1" id="hive_hive_authorization_models__entry__2">
                     <p class="p">
                        <strong class="ph b bold">
                           <strong class="ph b bold">Secure?</strong>
                        </strong>
                     </p>
                  </th>
                  <th class="entry colsep-1 rowsep-1" id="hive_hive_authorization_models__entry__3">
                     <p class="p">
                        <strong class="ph b bold">
                           <strong class="ph b bold">Fine-grained authorization (column, row level)</strong>
                        </strong>
                     </p>
                  </th>
                  <th class="entry colsep-1 rowsep-1" id="hive_hive_authorization_models__entry__4">
                     <p class="p">
                        <strong class="ph b bold">
                           <strong class="ph b bold">Privilege management using GRANT/REVOKE statements</strong>
                        </strong>
                     </p>
                  </th>
                  <th class="entry colsep-1 rowsep-1" id="hive_hive_authorization_models__entry__5">
                     <p class="p">
                        <strong class="ph b bold">
                           <strong class="ph b bold">Centralized management GUI</strong>
                        </strong>
                     </p>
                  </th>
               </tr>
            </thead><tbody class="tbody">
               <tr class="row">
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__1 ">
                     <p class="p"> Apache Ranger</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__2 ">
                     <p class="p"> Secure</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__3 ">
                     <p class="p"> Yes</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__4 ">
                     <p class="p"> Yes</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__5 ">
                     <p class="p"> Yes</p>
                  </td>
               </tr>
               <tr class="row">
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__1 ">
                     <p class="p"> Storage-based</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__2 ">
                     <p class="p"> Secure</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__3 ">
                     <p class="p">No authorization at SQL layer in HiveServer. Provides Metastore server
                        authorization for the Metastore API only.</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__4 ">
                     <p class="p"> No. Table privilege based on HDFS permission</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__5 ">
                     <p class="p"> No</p>
                  </td>
               </tr>
               <tr class="row">
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__1 ">
                     <p class="p"> Hive default</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__2 ">
                     <p class="p"> Not secure. No restriction on which users can run GRANT statements</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__3 ">
                     <p class="p"> Yes</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__4 ">
                     <p class="p"> Yes</p>
                  </td>
                  <td class="entry colsep-1 rowsep-1" headers="hive_hive_authorization_models__entry__5 ">
                     <p class="p"> No</p>
                  </td>
               </tr>
            </tbody></table>

      
      <section class="section"><h2 class="title sectiontitle">Apache Ranger policy authorization</h2>

         <p class="p">Apache Ranger provides centralized policy management for authorization and auditing
            of all Cloudera Runtime services, including Hive. All Cloudera Runtime services are installed with a Ranger plugin
            used to intercept authorization requests for that service, as shown in the following
            illustration.</p>

            <br><img class="image" src="../images/hive_Ranger-HiveIntegration.png"><br>

         <p class="p">Authorizing Hive through Ranger instead of using SBA is highly recommended. </p>
      </section>
      <section class="section"><h2 class="title sectiontitle">Storage based authorization</h2>
    
      

         <p class="p"> As the name implies, storage-based authorization relies on the authorization provided
            by the storage layer. In CDP Data Center, the storage layer is HDFS, which
            provides both POSIX and ACL permissions. Hive is one of many Cloudera Runtime services that share
            storage on HDFS. By enabling this model on the Hive Metastore Server, Hadoop
            administrators can provide consistent data and metadata authorization. The model
            controls access to metadata and checks permissions on the corresponding directories of
            the HDFS file system. Traditional POSIX permissions for the HDFS directories where
            tables reside determine access to those tables. For example, to alter table metadata for
            a table stored in HDFS at <span class="ph filepath">/warehouse/tablespace/managed/hive</span>, a
            user must have WRITE permissions on that directory. However, this authorization model
            doesn't support column-level security.</p>
         <p class="p">In addition to the traditional POSIX permissions model, HDFS also provides ACLs,
            or access control lists, as described in <em class="ph i italic">ACLs on
               HDFS</em>. An ACL consists of a set of ACL entries, and each entry names a
            specific user or group and grants or denies read, write, and execute permissions for
            the specified user or group. These ACLs are also based on POSIX specifications, and
            they are compatible with the traditional POSIX permissions model.</p>
         <p class="p">HDFS ACL permissions provide administrators with authentication control over
            databases, tables, and table partitions on the HDFS file system. For example, an
            administrator can create a role with a set of grants on specific HDFS tables, then
            grant the role to a group of users. Roles allow administrators to easily reuse
            permission grants. Hortonworks recommends relying on POSIX permissions and a small
            number of ACLs to augment the POSIX permissions for exceptions and edge cases.</p>
         <p class="p">A file with an ACL incurs additional memory cost to the NameNode due to the
            alternate algorithm used for permission checks on such files.</p>
      </section>
   </div>
<nav role="navigation" class="related-links"><div class="familylinks"></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="http://docs-stage.cloudera.com/HDPDocuments/CR/CR-1.0.0/authorization-ranger/content/resource_policy_create_a_hive_policy.html" target="_blank">Configure a Resource-based Policy: Hive</a></div><div><a class="link" href="http://docs-stage.cloudera.com/HDPDocuments/CR/CR-1.0.0/authorization-ranger/content/row_level_filtering_and_column_masking_in_hive.html" target="_blank">Row-level Filtering and Column Masking in Hive</a></div><div><a class="link" href="http://docs-stage.cloudera.com/HDPDocuments/CR/CR-1.0.0/starting-hive/content/hive_start_hive_as_authorized_user.html" target="_blank">Query Hive</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>