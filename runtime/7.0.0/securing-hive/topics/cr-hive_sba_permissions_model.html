<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="As administrator, you must understand the permissions model supported in HDP 3.0 and later. If you do not use Ranger for security, you need to add users to an HDFS access control list to permit access to the Hive warehouse for running DML queries."><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_hive_authorization_models.html"><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_transactional_table_access.html"><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_configure_storage_based_authorization.html"><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_authorization_configuration_parameters.html"><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_storage_based_authorization_permissions.html"><meta name="DC.Relation" scheme="URI" content="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html"><meta name="DC.Relation" scheme="URI" content="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hdfs-acls/content/acls_on_hdfs.html"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_sba_permissions_model"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>HDFS ACL permissions model</title><script type="application/javascript">
      
      
    //The id for tree cookie
    var treeCookieId = "treeview-bk_release-notes";
    var language = "en";
    var w = new Object();
    //Localization
    txt_filesfound = 'Results';
    txt_enter_at_least_1_char = "You must enter at least one character.";
    txt_browser_not_supported = "Please enable JavaScript.";
    txt_please_wait = "Please wait. Search in progress...";
    txt_results_for = "Results for: ";
    
    
    </script><script type="application/javascript" src="https://code.jquery.com/jquery-1.4.3.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery-ui-1.8.2.custom.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.cookie.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.treeview.min.js"></script><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"><script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js" type="application/javascript"></script><script type="application/javascript" src="/common/js/navigation.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/main.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileInfoList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/nwSearchFnt.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/en_stemmer.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-1.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-2.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-3.js"></script><script type="application/javascript">
      
      
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-22950817-19', 'auto');
    ga('send', 'pageview');
    
    
    </script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/plugins.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/scripts.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" type="application/javascript"></script><script type="application/javascript">
      
    // PAGE SPECIFIC SCRIPTS
    
    $('.chapters>li .dropdown').click(function () {
    var $arrow = $(this).find('i.fa');
    if( $arrow.hasClass('fa-chevron-down')) {
    $(this).siblings('.sections').show();
    $arrow.removeClass('fa-chevron-down').addClass('fa-chevron-up');
    } else {
    console.log('up');
    $(this).siblings('.sections').hide();
    $arrow.removeClass('fa-chevron-up').addClass('fa-chevron-down');
    }
    });
    
    //  $('h3').on('mouseenter',function() {
    //      console.log('received mouseover');
    //      $(this).find('.hash-link').show();
    //  });
    
    //  $('h3').on('mouseleave',function() {
    //      $(this).find('.hash-link').hide();
    //  });
    
    
    // STICKY SIDEBARs
    var stickySidebar = $('.sticky');
    
    if (stickySidebar.length > 0) {
    var stickyHeight = stickySidebar.height(),
    sidebarTop = stickySidebar.offset().top;
    }
    
    // on scroll move the sidebar
    $(window).scroll(function () {
    if (stickySidebar.length > 0) {
    var scrollTop = $(window).scrollTop();
    console.log
    
    if (sidebarTop < scrollTop) {
    stickySidebar.css('top', scrollTop - sidebarTop);
    
    // stop the sticky sidebar at the footer to avoid overlapping
    var sidebarBottom = stickySidebar.offset().top + stickyHeight,
    stickyStop = $('.main-content').offset().top + $('.main-content').height();
    if (stickyStop < sidebarBottom) {
    var stopPosition = $('.main-content').height() - stickyHeight;
    stickySidebar.css('top', stopPosition);
    }
    }
    else {
    stickySidebar.css('top', '0');
    }
    }
    });
    
    $(window).resize(function () {
    if (stickySidebar.length > 0) {
    stickyHeight = stickySidebar.height();
    }
    });
    
    // Initialize Syntax Highlighting
    hljs.initHighlightingOnLoad();
    
    </script><style type="text/css">
      
      
    input {
    margin-bottom: 5px;
    margin-top: 2px;
    }
    
    .folder {
    display: block;
    height: 22px;
    padding-left: 20px;
    background: transparent url(/common/themes/pre-hdp-3.1/images/folder.gif) 0 0px no-repeat;
    }
    
    </style><link href="/common/themes/pre-hdp-3.1/images/favicon.ico" rel="icon" type="image/x-icon" sizes="16x16"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-70x70.png" rel="icon" type="image/x-icon" sizes="32x32"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="icon" type="image/x-icon" sizes="192x192"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="apple-touch-icon-precomposed" type="image/x-icon" sizes="192x192"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css" rel="stylesheet"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/main.css"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/docux.css"><style type="text/css"></style><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery-ui-1.8.2.custom.css"><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery.treeview.css"><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"></head><body class="docs books"><div id="body_container"><div class="breadcrumb_bg"><!-- --></div><div id="navbar"><section class="ps topstrip"><div><!-- --></div></section></div><div id="mainbody"><section class="ps titlebar"><div><div class="breadcrumb"><a href="/">Hortonworks Docs</a> » <a id="index_page" href="../../index.html">Cloudera Runtime 1.0.0</a> » <span class="current_book">Securing Apache Hive</span></div><div class="book_title">Securing Apache Hive</div><div class="ebooks"><div class="formats"><span class="desc">Also available as:</span><div class="format"><a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" title="Download a PDF of this document" class="pdficon" href="../cr-hive_securing_hive.pdf"><img src="/common/themes/pre-hdp-3.1/images/pdf.png" alt="PDF"></a></div></div></div></div></section><div class="lowerbody"><section class="ps doc-content"><div><div class="aside left"><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div class="ui-tabs ui-widget ui-widget-content ui-corner-all"><div id="treeDiv" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><img src="/common/themes/pre-hdp-3.1/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li><a href="../topics/cr-hive_hive_authorization_models.html">Authorizing Apache Hive Access</a></li><li class="active"><a href="../topics/cr-hive_sba_permissions_model.html">HDFS ACL permissions model</a><ul><li><a href="../topics/cr-hive_configure_storage_based_authorization.html">Configure storage-based authorization</a></li><li><a href="../topics/cr-hive_authorization_configuration_parameters.html">Authorization configuration parameters</a></li><li><a href="../topics/cr-hive_storage_based_authorization_permissions.html">Storage-based operation permissions</a></li></ul></li><li><a href="../topics/cr-hive_transactional_table_access.html">Transactional table access</a></li><li><a href="../topics/cr-hive_external_table_access.html">External table access</a></li><li><a href="../topics/cr-hive_spark_access_to_hive.html">Apache Spark access to Apache Hive</a></li><li><a href="../topics/cr-hive_remote_data_access.html">Remote data access</a><ul><li><a href="../topics/cr-hive_secure_hiveserver_using_ldap.html">Secure HiveServer using LDAP</a></li><li><a href="../topics/cr-hive_secure_hiveserver_using_ldap_over_ssl.html">Secure HiveServer using LDAP over SSL</a></li><li><a href="../topics/cr-hive_secure_llap_in_hiveserver.html">Secure LLAP in HiveServer</a></li><li><a href="../topics/cr-hive_connections_to_hive.html">Connections to Apache Hive</a></li></ul></li></ul></div></div></div></div></div><div class="formats"><div class="pdf"><!-- --></div></div></div><div class="next-prev-links"><span class="previouslink"><a class="link" href="../topics/cr-hive_hive_authorization_models.html" title="As administrator, you can choose whether or not to set up Apache Ranger authorization use another authorization model to limit Apache Hive access to approved users.">Prev</a></span><span class="nextlink"><a class="link" href="../topics/cr-hive_transactional_table_access.html" title="As administrator, you must set file system permissions or enable the Apache Ranger service for authorization of users who want to work with transactional tables, which are the default and ACID-compliant tables in Hive 3 and later.">Next</a></span></div><div id="content" aria-labelledby="ariaid-title1">
 <h1 class="title topictitle1" id="ariaid-title1">HDFS ACL permissions model</h1>
 
 <div class="body conbody"><p class="shortdesc">As administrator, you must understand the permissions model supported in HDP 3.0 and
  later. If you do not use Ranger for security, you need to add users to an HDFS access control list
  to permit access to the Hive warehouse for running DML queries.</p>
  <p class="p">Hive 3 supports the HDFS access control model instead of the past Hive permission inheritance
   based on the <code class="ph codeph">hive.warehouse.subdir.inherit.perms</code> parameter setting. In Hive 3, a
   directory inherits permissions from the <em class="ph i">Default ACL</em>. The Default ACL serves as a template
   from which Access ACLs for subdirectories and files are built. The Access ACL manages user access
   to child directories and files derived from the Default ACL. </p><figure class="fig fignone"><img class="image" id="hive_sba_permissions_model__image_wd5_dlx_c2b" src="../images/cr-hive_hiveql_sba_permissions_model.png"></figure>
  <p class="p">Modifications to the Default ACL of a parent are propagated to the Access ACL or Default ACL of
   new children only. Existing children are unchanged.</p>
  <div class="p">The structures of Default ACLs and Access ACLs are identical:<table class="table frame-all" id="hive_sba_permissions_model__table_sny_lmx_c2b"><caption></caption><colgroup><col><col><col></colgroup><thead class="thead">
      <tr class="row">
       <th class="entry align-left colsep-1 rowsep-1" id="hive_sba_permissions_model__table_sny_lmx_c2b__entry__1">Entity Type</th>
       <th class="entry align-left colsep-1 rowsep-1" id="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2">Entity</th>
       <th class="entry align-left colsep-1 rowsep-1" id="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3">Permissions</th>
      </tr>
     </thead><tbody class="tbody">
      <tr class="row">
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__1 " rowspan="2">Owners</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2 ">Owning user</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3 ">r-w-x</td>
      </tr>
      <tr class="row">
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2 ">Owning group</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3 ">r-w-x</td>
      </tr>
      <tr class="row">
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__1 " rowspan="2">Named groups and users</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2 ">marketing</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3 ">r-w-x</td>
      </tr>
      <tr class="row">
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2 ">jane</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3 ">r-w-x</td>
      </tr>
      <tr class="row">
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__1 ">Unnamed groups and users</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2 ">other</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3 ">r-w-x</td>
      </tr>
      <tr class="row">
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__1 ">Not applicable</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__2 ">mask</td>
       <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_sny_lmx_c2b__entry__3 ">r-w-x</td>
      </tr>
     </tbody></table></div>
  <section class="section"><h2 class="title sectiontitle">HDFS permissions</h2>
   
   <div class="p">The following table describes read, write, and execute permissions on directories and
     files:<table class="table frame-all" id="hive_sba_permissions_model__table_t5p_h5x_c2b"><caption></caption><colgroup><col><col><col></colgroup><thead class="thead">
       <tr class="row">
        <th class="entry align-left colsep-1 rowsep-1" id="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1" colspan="2">File</th>
        <th class="entry align-left colsep-1 rowsep-1" id="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__2">Directory</th>
       </tr>
      </thead><tbody class="tbody">
       <tr class="row">
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1 ">Read (r)</td>
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1 ">Able to read a file</td>
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__2 ">Requires r-x to list the directory contents</td>
       </tr>
       <tr class="row">
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1 ">Write (w)</td>
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1 ">Able to write or append to a file</td>
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__2 ">Requires r-x to create subdirectories</td>
       </tr>
       <tr class="row">
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1 ">Execute (e)</td>
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__1 ">Able to parse and run file commands</td>
        <td class="entry align-left colsep-1 rowsep-1" headers="hive_sba_permissions_model__table_t5p_h5x_c2b__entry__2 ">Requires x to
         traverse
         the directory</td>
       </tr>
      </tbody></table></div>

  </section>
  <section class="section"><h2 class="title sectiontitle">Permission examples</h2>
   
   <p class="p">Consider an example in which you want the sales group to access contents of a table for all
    HiveQL operations. In this case, you must set a Default ACL permissions for the group as -
     <code class="ph codeph">default:group:sales:rwx</code>. The default mask on the directories restricts the
    permissions granted using Default ACLs. The Default ACL for the <em class="ph i">hive</em> group is
     <code class="ph codeph">default:group:hive:rwx</code>. This mask gives read, write, and execute access to the
    hive group and sets permissions on the base directory for databases accessed through Ambari. </p>
   <p class="p">The following example shows directory and file permissions required to read
    sales_report.txt:</p><figure class="fig fignone"><img class="image" id="hive_sba_permissions_model__image_t3l_gfy_c2b" src="../images/cr-hive_hiveql_sba_permissions_read.png"></figure>
   <p class="p">The following example shows directory and file permissions required to append to
    sales_report.txt:</p>
   <figure class="fig fignone"><img class="image" id="hive_sba_permissions_model__image_z3n_pfy_c2b" src="../images/cr-hive_hiveql_sba_permissions_write.png"></figure>
   <p class="p">The following example shows directory permissions required to delete sales_report.txt:</p>
   <figure class="fig fignone"><img class="image" id="hive_sba_permissions_model__image_k2j_sfy_c2b" src="../images/cr-hive_hiveql_sba_permissions_delete.png"></figure>
  </section>
  
 </div>
 
<nav role="navigation" class="related-links"><ul class="ullinks"><li class="link ulchildlink"><strong><a href="../topics/cr-hive_configure_storage_based_authorization.html">Configure storage-based authorization</a></strong><br>You need to set parameters in <span class="ph filepath">hive-site.xml</span> to enable       storage-based authorization (SBA).</li><li class="link ulchildlink"><strong><a href="../topics/cr-hive_authorization_configuration_parameters.html">Authorization configuration parameters</a></strong><br>Understanding key authorization parameter descriptions help you configure storage-based     authorization correctly. </li><li class="link ulchildlink"><strong><a href="../topics/cr-hive_storage_based_authorization_permissions.html">Storage-based operation permissions</a></strong><br></li></ul><div class="familylinks"></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html" target="_blank">Apache Software Foundation HDFS Permissions Guide</a></div><div><a class="link" href="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hdfs-acls/content/acls_on_hdfs.html" target="_blank">HDP 3.0.0 Reference HDFS ACLs</a></div></div></nav></div></div></section></div></div></div><section class="ps footer"><div><div class="copyright">© 2012–2019, Hortonworks, Inc.</div><div class="license">Document licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative
          Commons Attribution ShareAlike 4.0 License</a>.</div><div class="menulinks"><a href="https://hortonworks.com">Hortonworks.com</a> | 
          <a href="#">Documentation</a> |
          <a href="https://hortonworks.com/support/">Support</a> |
          <a href="https://community.hortonworks.com/">Community</a></div></div></section></body></html>