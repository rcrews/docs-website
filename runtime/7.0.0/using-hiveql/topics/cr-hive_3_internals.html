<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="Hive 3 achieves atomicity and isolation of operations on transactional tables by using techniques in write, read, insert, create, delete, and update operations that involve delta files, which can provide query status information and help you troubleshoot query problems."><meta name="prodname" content="Data Access"><meta name="version" content="3"><meta name="release" content="1"><meta name="modification" content="0"><meta name="brand" content="Data Platform"><meta name="rights" content="© 2019, 2018, 2017, 2016 Hortonworks, Inc."><meta name="DC.Date.Created" content="2018-07-12"><meta name="DC.Date.Modified" content="2018-07-12"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_hive3_implementation"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>Hive 3 ACID transactions</title><script type="application/javascript">
      
      
    //The id for tree cookie
    var treeCookieId = "treeview-bk_release-notes";
    var language = "en";
    var w = new Object();
    //Localization
    txt_filesfound = 'Results';
    txt_enter_at_least_1_char = "You must enter at least one character.";
    txt_browser_not_supported = "Please enable JavaScript.";
    txt_please_wait = "Please wait. Search in progress...";
    txt_results_for = "Results for: ";
    
    
    </script><script type="application/javascript" src="https://code.jquery.com/jquery-1.4.3.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery-ui-1.8.2.custom.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.cookie.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.treeview.min.js"></script><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"><script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js" type="application/javascript"></script><script type="application/javascript" src="/common/js/navigation.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/main.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileInfoList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/nwSearchFnt.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/en_stemmer.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-1.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-2.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-3.js"></script><script type="application/javascript">
      
      
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-22950817-19', 'auto');
    ga('send', 'pageview');
    
    
    </script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/plugins.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/scripts.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" type="application/javascript"></script><script type="application/javascript">
      
    // PAGE SPECIFIC SCRIPTS
    
    $('.chapters>li .dropdown').click(function () {
    var $arrow = $(this).find('i.fa');
    if( $arrow.hasClass('fa-chevron-down')) {
    $(this).siblings('.sections').show();
    $arrow.removeClass('fa-chevron-down').addClass('fa-chevron-up');
    } else {
    console.log('up');
    $(this).siblings('.sections').hide();
    $arrow.removeClass('fa-chevron-up').addClass('fa-chevron-down');
    }
    });
    
    //  $('h3').on('mouseenter',function() {
    //      console.log('received mouseover');
    //      $(this).find('.hash-link').show();
    //  });
    
    //  $('h3').on('mouseleave',function() {
    //      $(this).find('.hash-link').hide();
    //  });
    
    
    // STICKY SIDEBARs
    var stickySidebar = $('.sticky');
    
    if (stickySidebar.length > 0) {
    var stickyHeight = stickySidebar.height(),
    sidebarTop = stickySidebar.offset().top;
    }
    
    // on scroll move the sidebar
    $(window).scroll(function () {
    if (stickySidebar.length > 0) {
    var scrollTop = $(window).scrollTop();
    console.log
    
    if (sidebarTop < scrollTop) {
    stickySidebar.css('top', scrollTop - sidebarTop);
    
    // stop the sticky sidebar at the footer to avoid overlapping
    var sidebarBottom = stickySidebar.offset().top + stickyHeight,
    stickyStop = $('.main-content').offset().top + $('.main-content').height();
    if (stickyStop < sidebarBottom) {
    var stopPosition = $('.main-content').height() - stickyHeight;
    stickySidebar.css('top', stopPosition);
    }
    }
    else {
    stickySidebar.css('top', '0');
    }
    }
    });
    
    $(window).resize(function () {
    if (stickySidebar.length > 0) {
    stickyHeight = stickySidebar.height();
    }
    });
    
    // Initialize Syntax Highlighting
    hljs.initHighlightingOnLoad();
    
    </script><style type="text/css">
      
      
    input {
    margin-bottom: 5px;
    margin-top: 2px;
    }
    
    .folder {
    display: block;
    height: 22px;
    padding-left: 20px;
    background: transparent url(/common/themes/pre-hdp-3.1/images/folder.gif) 0 0px no-repeat;
    }
    
    </style><link href="/common/themes/pre-hdp-3.1/images/favicon.ico" rel="icon" type="image/x-icon" sizes="16x16"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-70x70.png" rel="icon" type="image/x-icon" sizes="32x32"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="icon" type="image/x-icon" sizes="192x192"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="apple-touch-icon-precomposed" type="image/x-icon" sizes="192x192"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css" rel="stylesheet"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/main.css"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/docux.css"><style type="text/css"></style><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery-ui-1.8.2.custom.css"><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery.treeview.css"><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"></head><body class="docs books"><div id="body_container"><div class="breadcrumb_bg"><!-- --></div><div id="navbar"><section class="ps topstrip"><div><!-- --></div></section></div><div id="mainbody"><section class="ps titlebar"><div><div class="breadcrumb"><a href="/">Hortonworks Docs</a> » <a id="index_page" href="../../index.html">Data Platform 3.1.0</a> » <span class="current_book">Using Apache HiveQL</span></div><div class="book_title">Using Apache HiveQL</div><div class="ebooks"><div class="formats"><span class="desc">Also available as:</span><div class="format"><a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" title="Download a PDF of this document" class="pdficon" href="../cr-hive_using_hiveql.pdf"><img src="/common/themes/pre-hdp-3.1/images/pdf.png" alt="PDF"></a></div></div></div></div></section><div class="lowerbody"><section class="ps doc-content"><div><div class="aside left"><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div class="ui-tabs ui-widget ui-widget-content ui-corner-all"><div id="treeDiv" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><img src="/common/themes/pre-hdp-3.1/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li><a href="../topics/cr-hive_hive_3_tables.html">Apache Hive 3 tables</a><ul><li><a href="../topics/cr-hive_create_a_crud_transactional_table.html">Create a CRUD transactional table</a></li><li><a href="../topics/cr-hive_create_insert_only_transactional_table.html">Create an insert-only transactional table</a></li><li><a href="../topics/cr-hive_create_an_external_table.html">Create, use, and drop an external table</a></li><li><a href="../topics/cr-hive_drop_external_table_data.html">Drop an external table along with data</a></li><li><a href="../topics/cr-hive-create-s3-based-table.html">Create an S3-based table</a></li><li><a href="../topics/cr-hive_constraints.html">Using constraints</a></li><li><a href="../topics/cr-hive_table_type.html">Determine the table type</a></li></ul></li><li class="active"><a href="../topics/cr-hive_3_internals.html">Hive 3 ACID transactions</a></li><li><a href="../topics/cr-hive_using_materialized_views.html">Using materialized views</a><ul><li><a href="../topics/cr-hive_create_and_use_materialized_view.html">Create and use a materialized view</a></li><li><a href="../topics/cr-hive_use_materialized_view_subquery.html">Use a materialized view in a subquery</a></li><li><a href="../topics/cr-hive_drop_a_materialized_view.html">Drop a materialized view</a></li><li><a href="../topics/cr-hive_show_a_materialized_view.html">Show materialized views</a></li><li><a href="../topics/cr-hive_describe_a_materialized_view.html">Describe a materialized view</a></li><li><a href="../topics/cr-hive_enable_disable_materialized_rewrite.html">Manage rewriting of a query</a></li><li><a href="../topics/cr-hive_create_materialized_view_in_druid.html">Create a materialized view and store it in Druid</a></li><li><a href="../topics/cr-hive_create_partitioned_materialized_view.html">Create and use a partitioned materialized view</a></li></ul></li><li><a href="../topics/cr-hive_hive_query_language_basics.html">Apache Hive Query Language basics</a><ul><li><a href="../topics/cr-hive_query_information_schema.html">Query the information_schema database</a></li><li><a href="../topics/cr-hive_insert_data_in_a_hive_table.html">Insert data into an ACID table</a></li><li><a href="../topics/cr-hive_update_data_in_a_hive_table.html">Update data in a table</a></li><li><a href="../topics/cr-hive_merge_data_in_hive_tables.html">Merge data in tables</a></li><li><a href="../topics/cr-hive_delete_data_from_a_hive_table.html">Delete data from a table</a></li><li><a href="../topics/cr-hive_use_a_subquery_in_a_hive_table.html">Use a subquery</a><ul><li><a href="../topics/cr-hive_hive_subquery_limitations.html">Subquery restrictions</a></li></ul></li><li><a href="../topics/cr-hive_aggregate_and_group_data_in_a_hive_table.html">Aggregate and group data</a></li><li><a href="../topics/cr-hive_query_correlated_data_in_a_hive_table.html">Query correlated data</a></li><li><a href="../topics/cr-hive_using_common_table_expressions.html">Using common table expressions</a><ul><li><a href="../topics/cr-hive_create_a_table_using_a_cte.html">Use a CTE in a query</a></li></ul></li><li><a href="../topics/cr-hive_name_a_hive_column_using_an_identifier.html">Escape an illegal identifier</a></li><li><a href="../topics/cr-hive_char_data_type_support_in_hive.html">CHAR data type support</a></li></ul></li><li><a href="../topics/cr-hive-create_partitions_dynamically.html">Create partitions dynamically</a><ul><li><a href="../topics/cr-hive-msck-repair.html">Repair partitions using MSCK repair</a></li></ul></li><li><a href="../topics/cr-hive-manage-partitions.html">Manage partitions automatically</a><ul><li><a href="../topics/cr-hive-automate-msck.html">Automate partition discovery and repair</a></li><li><a href="../topics/cr-hive-set-partition-retention.html">Manage partition retention time</a></li></ul></li><li><a href="../topics/cr-hive_surrogate_keys.html">Generate surrogate keys</a></li><li><a href="../topics/cr-hive_query_sql_using_jdbcstoragehandler.html">Query a SQL data source using the JdbcStorageHandler</a></li><li><a href="../topics/cr-hive-using-functions.html">Using functions</a><ul><li><a href="../topics/cr-hive-show-functions.html">Reload, view, and filter functions</a></li><li><a href="../topics/cr-hive_create_udf.html">Create a user-defined function</a><ul><li><a href="../topics/cr-hive_set_up_development_environment.html">Set up the development environment</a></li><li><a href="../topics/cr-hive_create_udf_class.html">Create the UDF class</a></li><li><a href="../topics/cr-hive_create_place_udf_jar.html">Build the project and upload the JAR</a></li><li><a href="../topics/cr-hive_register_udf.html">Register the UDF</a></li><li><a href="../topics/cr-hive_use_udf_in_query.html">Call the UDF in a query</a></li></ul></li></ul></li></ul></div></div></div></div></div><div class="formats"><div class="pdf"><!-- --></div></div></div><div id="content" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Hive 3 ACID transactions</h1>
  
  <div class="body conbody"><p class="shortdesc">Hive 3 achieves atomicity and isolation of operations on transactional tables by using
    techniques in write, read, insert, create, delete, and update operations that involve delta
    files, which can provide query status
    information and
    help you troubleshoot query problems. </p>
    <section class="section"><h2 class="title sectiontitle">Write and read operations</h2>
      
      <p class="p">Hive 3 write and read operations improve the ACID properties and performance of
        transactional tables. Transactional tables perform as well as other tables. Hive supports
        all TPC Benchmark DS (TPC-DS) queries. </p>
      <div class="p">Hive 3 and later extends atomic operations from simple writes and inserts to support the
        following operations: <ul class="ul" id="hive_hive3_implementation__ul_mcw_jzj_m2b">
          <li class="li">Writing to multiple partitions</li>
          <li class="li">Using multiple insert clauses in a single SELECT statement</li>
        </ul></div>
      <p class="p"> A single statement can write to multiple partitions or multiple tables. If the operation
        fails, partial writes or inserts are not visible to users. Operations remain performant even
        if data changes often, such as one percent per hour. Hive 3 and later does not overwrite the
        entire partition to perform update or delete operations. </p>

      <p class="p">Read semantics consist of snapshot isolation. Hive logically locks in the state of the
        warehouse when a read operation starts. A read operation is not affected by changes that
        occur during the operation.</p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Atomicity and isolation in insert-only tables</h2>
      
      <p class="p">When an insert-only transaction begins, the transaction manager gets a transaction ID. For
        every write, the transaction manager allocates a write ID. This ID determines a path to
        which data is actually written. The following code shows an example of a statement that
        creates insert-only transactional table:</p>
      <pre class="pre codeblock"><code>CREATE TABLE tm (a int, b int) TBLPROPERTIES
('transactional_properties'='insert_only')</code></pre>
      <p class="p">Assume that three insert operations occur, and the second one fails:</p>
      <pre class="pre codeblock"><code>INSERT INTO tm VALUES(1,1);
INSERT INTO tm VALUES(2,2); // Fails
INSERT INTO tm VALUES(3,3);</code></pre>
      <p class="p">For every write operation, Hive creates a delta directory to which the transaction manager
        writes data files. Hive writes all data to delta files, designated by write IDs, and mapped
        to a transaction ID that represents an atomic operation. If a failure occurs, the
        transaction is marked aborted, but it is atomic:</p>
      <pre class="pre codeblock"><code>tm
___ delta_0000001_0000001_0000
└── 000000_0
___ delta_0000002_0000002_0000       //Fails
└── 000000_0
___ delta_0000003_0000003_0000
└── 000000_0</code></pre>
      <p class="p">During the read process, the transaction manager maintains the state of every transaction.
        When the reader starts, it asks for the snapshot information, represented by a high
        watermark. The watermark identifies the highest transaction ID in the system followed by a
        list of exceptions that represent transactions that are still running or are aborted. </p>
      <p class="p">The reader looks at deltas and filters out, or skips, any IDs of transactions that are
        aborted or still running. The reader uses this technique with any number of partitions or
        tables that participate in the transaction to achieve atomicity and isolation of operations
        on transactional tables. </p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Atomicity and isolation in CRUD tables</h2>
      
      <p class="p">You create a full CRUD (create, retrieve, update, delete) transactional table using the
        following SQL statement:</p>
      <pre class="pre codeblock"><code>CREATE TABLE acidtbl (a INT, b STRING); </code></pre>
      <p class="p">Running <code class="ph codeph">SHOW CREATE TABLE acidtbl</code> provides information about the defaults:
        transactional (ACID) and the ORC data storage format:</p>
      <pre class="pre codeblock"><code>
        +----------------------------------------------------+
        |                   createtab_stmt                   |
        +----------------------------------------------------+
        | CREATE TABLE `acidtbl`(                            |
        |   `a` int,                                         |
        |   `b` string)                                      |
        | ROW FORMAT SERDE                                   |
        |   'org.apache.hadoop.hive.ql.io.orc.OrcSerde'      |
        | STORED AS INPUTFORMAT                              |
        |   'org.apache.hadoop.hive.ql.io.orc.OrcInputFormat'  |
        | OUTPUTFORMAT                                       |
        |   'org.apache.hadoop.hive.ql.io.orc.OrcOutputFormat' |
        | LOCATION                                           |
        |   's3://myserver.com:8020/warehouse/tablespace/managed/hive/acidtbl' |
        | TBLPROPERTIES (                                    |
        |   'bucketing_version'='2',                         |
        |   'transactional'='true',                          |
        |   'transactional_properties'='default',            |
        |   'transient_lastDdlTime'='1555090610')            |
        +----------------------------------------------------+
      </code></pre>
      <p class="p">Tables that support updates and deletions require a slightly different technique to achieve
        atomicity and isolation. Hive runs on top of an append-only file system, which means Hive
        does not perform in-place updates or deletions. Isolation of readers and writers cannot
        occur in the presence of in-place updates or deletions. In this situation, a lock manager or
        some other mechanism, is required for isolation. These mechanisms create a problem for
        long-running queries.</p>
      <div class="p">Instead of in-place updates, Hive decorates every row with a row ID. The row ID is a
          <code class="ph codeph">struct</code> that consists of the following information: <ul class="ul" id="hive_hive3_implementation__ul_w1m_xbf_khb">
          <li class="li">The write ID that maps to the transaction that created the row</li>
          <li class="li">The bucket ID, a bit-backed integer with several bits of information, of the physical
            writer that created the row</li>
          <li class="li">The row ID, which numbers rows as they were written to a data file</li>
        </ul></div>
      <figure class="fig fignone">
        <img class="image" id="hive_hive3_implementation__image_nn3_t5x_g2b" src="../images/cr-hive_hive3_implementation_crud.png">
      </figure>
      <p class="p">Instead of in-place deletions, Hive appends changes to the table when a deletion occurs.
        The deleted data becomes unavailable and the compaction process takes care of the garbage
        collection later.</p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Create operation</h2>
      
      <p class="p">The following example inserts several rows of data into a full CRUD transactional table,
        creates a delta file, and adds row IDs to a data file. </p>
      <pre class="pre codeblock"><code>INSERT INTO acidtbl (a,b) VALUES (100, "oranges"), (200, "apples"), (300, "bananas");</code></pre>
      <div class="p">This operation generates a directory and file, delta_00001_00001/bucket_0000, that have the
        following data: <table class="table frame-all" id="hive_hive3_implementation__table_aty_lnb_h2b"><caption></caption><colgroup><col><col><col></colgroup><thead class="thead">
              <tr class="row">
                <th class="entry align-left colsep-1 rowsep-1" id="hive_hive3_implementation__table_aty_lnb_h2b__entry__1">ROW_ID</th>
                <th class="entry align-left colsep-1 rowsep-1" id="hive_hive3_implementation__table_aty_lnb_h2b__entry__2">a</th>
                <th class="entry align-left colsep-1 rowsep-1" id="hive_hive3_implementation__table_aty_lnb_h2b__entry__3">b</th>
              </tr>
            </thead><tbody class="tbody">
              <tr class="row">
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__1 ">{1,0,0}</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__2 ">100</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__3 ">"oranges"</td>
              </tr>
              <tr class="row">
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__1 ">{1,0.1}</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__2 ">200</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__3 ">"apples"</td>
              </tr>
              <tr class="row">
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__1 ">{1,0,2}</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__2 ">300</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_aty_lnb_h2b__entry__3 ">"bananas"</td>
              </tr>
            </tbody></table>
      </div>
    </section>
    <section class="section"><h2 class="title sectiontitle">Delete operation</h2>
      
      <p class="p">A delete statement that matches a single row also creates a delta file, called the
        delete-delta. The file stores a set of row IDs for the rows that match your query. At read
        time, the reader looks at this information. When it finds a delete event that matches a row,
        it skips the
        row and that
        row is not included in the operator pipeline. The following example deletes data from a
        transactional table:</p>
      <div class="p">
        <pre class="pre codeblock"><code>DELETE FROM acidTbl where a = 200;</code></pre>
      </div>
      <div class="p">This operation generates a directory and file, delete_delta_00002_00002/bucket_0000 that
        have the following data: <table class="table frame-all" id="hive_hive3_implementation__table_fgf_24b_h2b"><caption></caption><colgroup><col><col><col></colgroup><thead class="thead">
              <tr class="row">
                <th class="entry align-left colsep-1 rowsep-1" id="hive_hive3_implementation__table_fgf_24b_h2b__entry__1">ROW_ID</th>
                <th class="entry align-left colsep-1 rowsep-1" id="hive_hive3_implementation__table_fgf_24b_h2b__entry__2">a</th>
                <th class="entry align-left colsep-1 rowsep-1" id="hive_hive3_implementation__table_fgf_24b_h2b__entry__3">b</th>
              </tr>
            </thead><tbody class="tbody">
              <tr class="row">
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_fgf_24b_h2b__entry__1 ">{1,0,1}</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_fgf_24b_h2b__entry__2 ">null</td>
                <td class="entry align-left colsep-1 rowsep-1" headers="hive_hive3_implementation__table_fgf_24b_h2b__entry__3 ">null</td>
              </tr>
            </tbody></table>
      </div>
    </section>
    <section class="section"><h2 class="title sectiontitle">Update operation</h2>
      
      <p class="p"> An update combines the deletion and insertion of new data. The following example updates a
        transactional table:</p>
      <pre class="pre codeblock"><code>UPDATE acidTbl SET b = "pears" where a = 300;</code></pre>
      <p class="p">One delta file contains the delete event, and the other, the insert event:</p>
      <figure class="fig fignone">
        <img class="image" id="hive_hive3_implementation__image_ubc_1tb_h2b" src="../images/cr-hive_update_operation.png">
      </figure>
      <p class="p">The reader, which requires the AcidInputFormat, applies all the insert events and
        encapsulates all the logic to handle delete events. A read operation first gets snapshot
        information from the transaction manager based on which it selects files that are relevant
        to that read operation. Next, the process splits each data file into the number of pieces
        that each process has to work on. Relevant delete events are localized to each processing
        task. Delete events are stored in a sorted ORC file. The compressed, stored data is minimal,
        which is a significant advantage of Hive 3. You no longer need to worry about saturating the
        network with insert events in delta files.</p>
    </section>
  </div>
</div></div></section></div></div></div><section class="ps footer"><div><div class="copyright">© 2012–2019, Hortonworks, Inc.</div><div class="license">Document licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative
          Commons Attribution ShareAlike 4.0 License</a>.</div><div class="menulinks"><a href="https://hortonworks.com">Hortonworks.com</a> | 
          <a href="#">Documentation</a> |
          <a href="https://hortonworks.com/support/">Support</a> |
          <a href="https://community.hortonworks.com/">Community</a></div></div></section></body></html>