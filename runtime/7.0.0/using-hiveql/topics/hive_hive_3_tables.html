<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="You can create a Hive-managed table or an external table. Hive does not fully control an external table, and you can keep the data source for this type of table outside the Hive metastore."><meta name="DC.Relation" scheme="URI" content="../topics/hive_create_a_crud_transactional_table.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_create_insert_only_transactional_table.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_create_an_external_table.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_drop_external_table_data.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive-create-s3-based-table.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_constraints.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive_table_type.html"><meta name="prodname" content="Data Access"><meta name="version" content="3"><meta name="release" content="1"><meta name="modification" content="0"><meta name="brand" content="Data Platform"><meta name="rights" content="© 2019, 2018, 2017, 2016 Cloudera, Inc."><meta name="DC.Date.Created" content="2018-07-12"><meta name="DC.Date.Modified" content="2018-07-12"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_apache_hive_tables"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Apache Hive 3 tables</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Apache Hive 3 tables</h1>
  
  <div class="body conbody"><p class="shortdesc">You can create a Hive-managed table or an external table. Hive does not fully control
    an external table, and you can keep the data source for this type of table outside the Hive
    metastore. </p>
    <p class="p">Hive has full control over managed tables. Only through Hive can you access and change the
      data in managed tables. Managed tables, except temporary tables, are transactional tables
      having ACID (atomicity, consistency, isolation, and durability) properties. Because Hive has
      full control of managed tables, Hive can optimize these tables extensively. If you need to
      bypass Hive to access data directly on the file system, you use external tables or a storage
      handler. </p>
    <p class="p">The following matrix lists the types of tables you can create using Hive, whether or not ACID
      properties are supported, required storage format, and key SQL operations. </p>
    <table class="table frame-all" id="hive_apache_hive_tables__table_mgk_zrv_g2b"><caption></caption><colgroup><col style="width:20.159680638722556%"><col style="width:19.960079840319363%"><col style="width:19.960079840319363%"><col style="width:19.960079840319363%"><col style="width:19.960079840319363%"></colgroup><thead class="thead">
          <tr class="row">
            <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__1">Table Type</th>
            <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__2">ACID</th>
            <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__3">File Format</th>
            <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__4">INSERT</th>
            <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__5">UPDATE/DELETE</th>
          </tr>
        </thead><tbody class="tbody">
          <tr class="row">
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__1 ">Managed: CRUD transactional</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__2 ">Yes</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__3 ">ORC</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__4 ">Yes</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__5 ">Yes</td>
          </tr>
          <tr class="row">
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__1 ">Managed: Insert-only transactional</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__2 ">Yes</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__3 ">Any</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__4 ">Yes</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__5 ">No</td>
          </tr>
          <tr class="row">
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__1 ">Managed: Temporary</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__2 ">No</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__3 ">Any</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__4 ">Yes</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__5 ">No</td>
          </tr>
          <tr class="row">
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__1 ">External</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__2 ">No</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__3 ">Any</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__4 ">Yes</td>
            <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_mgk_zrv_g2b__entry__5 ">No</td>
          </tr>
        </tbody></table>
    <p class="p">Although you cannot use the SQL UPDATE or DELETE statements to delete data in some types of
      tables, you can use DROP PARTITION on any table type to delete the data. </p>
    <p class="p">The managed table storage type is Optimized Row Column (ORC) by default. If you accept the
      default by not specifying any storage during table creation, or if you specify ORC storage,
      the result is an ACID table with insert, update, and delete (CRUD) capabilities. If you
      specify any other storage type, such as text, CSV,  AVRO, or JSON, the result is an
      insert-only ACID table. You cannot update or delete columns in the table.</p>
    <div class="p">The following table and subsequent sections cover other differences between managed
      (transactional) and external tables:<table class="table frame-all" id="hive_apache_hive_tables__table_zld_1dg_dfb"><caption></caption><colgroup><col><col><col><col></colgroup><thead class="thead">
            <tr class="row">
              <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_zld_1dg_dfb__entry__1">Table type</th>
              <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_zld_1dg_dfb__entry__2">Security</th>
              <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_zld_1dg_dfb__entry__3">Spark access</th>
              <th class="entry align-left colsep-1 rowsep-1" id="hive_apache_hive_tables__table_zld_1dg_dfb__entry__4">Optimizations</th>
            </tr>
          </thead><tbody class="tbody">
            <tr class="row">
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__1 ">Managed (transactional)</td>
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__2 ">Ranger authorization only, no simple authentication</td>
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__3 ">Yes, using Hive Warehouse Connector</td>
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__4 ">Statistics and others</td>
            </tr>
            <tr class="row">
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__1 ">External</td>
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__2 ">Ranger or simple authentication </td>
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__3 ">Yes, direct file access</td>
              <td class="entry align-left colsep-1 rowsep-1" headers="hive_apache_hive_tables__table_zld_1dg_dfb__entry__4 ">Limited</td>
            </tr>
          </tbody></table></div>
    <section class="section"><h2 class="title sectiontitle">Transactional tables</h2>
      
      <p class="p">Transactional (ACID) tables reside in the Hive warehouse. To achieve ACID compliance, Hive
        has to manage the table, including access to the table data. The data in CRUD (create,
        retrieve, update, and delete) tables must be in ORC file format. Insert-only tables support
        all file formats. Hive is designed to support a relatively low rate of transactions, as
        opposed to serving as an online analytical processing (OLAP) system. You can use the SHOW
        TRANSACTIONS command to list open and aborted transactions.</p>
      <p class="p">Transactional tables in Hive 3 are on a par with non-ACID tables. No bucketing or sorting
        is required in Hive 3 transactional tables. These tables are compatible with native cloud
        storage.</p>
      <p class="p">Hive supports one statement per transaction, which can include any number of rows,
        partitions, or tables.</p>
    </section>
    <section class="section"><h2 class="title sectiontitle">External tables</h2>
      
      <p class="p">External table data is not owned or controlled by Hive. You typically use an external table
        when you want to access data directly at the file level through a tool other than Hive. Hive
        3 does not support the following capabilities for external tables: </p>
      <ul class="ul">
        <li class="li">Query cache</li>
        <li class="li">Materialized views, except in a limited way</li>
        <li class="li">Default statistics gathering </li>
        <li class="li">Compute queries using statistics</li>
        <li class="li">Automatic runtime filtering</li>
        <li class="li">File merging after insert</li>
      </ul>
      <p class="p">When you run DROP TABLE on an external table, by default Hive drops only the metadata
        (schema). If you want the DROP TABLE command to also remove the actual data in the external
        table, as DROP TABLE does on a managed table, you need to set the
          <code class="ph codeph">external.table.purge</code> property to true as described later. </p>
    </section>
    <section class="section"><h2 class="title sectiontitle">Location of tables</h2>
      
      <div class="p">In Cloudera Data Platform (CDP), you specify the location of managed and external tables in
        the Hive warehouse:<ul class="ul" id="hive_apache_hive_tables__ul_hr5_tjr_j3b">
          <li class="li"><code class="ph codeph">hive.metastore.warehouse.external.dir =
              s3a://bucketName/warehouse/tablespace/external/hive</code></li>
          <li class="li"><code class="ph codeph">hive.metastore.warehouse.dir=s3a://bucketName/warehouse/tablespace/managed/hive</code></li>
        </ul>In Cloudera Manager (CM), when you launch your cluster, you accept default or specify
        Hive metastore variables <code class="ph codeph">hive.metastore.warehouse.dir</code> and
          <code class="ph codeph">hive.metastore.warehouse.external.dir</code> that determine storage locations
        for Hive tables. Managed tables reside in the managed tablespace, which only Hive can
        access. By default, Hive assumes external tables reside in the external tablespace. </div>
      <p class="p">To determine the managed or external table type, you can run the DESCRIBE EXTENDED
        table_name command.</p>
    </section>
    
  </div>
<nav role="navigation" class="related-links"><ul class="ullinks"><li class="link ulchildlink"><strong><a href="../topics/hive_create_a_crud_transactional_table.html">Create a CRUD transactional table</a></strong><br>You create a CRUD transactional table when you need a managed table that you can         update, delete, and merge.</li><li class="link ulchildlink"><strong><a href="../topics/hive_create_insert_only_transactional_table.html">Create an insert-only transactional table</a></strong><br>You can create a transactional table using any storage format if you do not require         update and delete capability.</li><li class="link ulchildlink"><strong><a href="../topics/hive_create_an_external_table.html">Create, use, and drop an external table</a></strong><br>You use an external table, which is a table that Hive does not manage, to import data         from a file on S3, or another file system, into Hive.</li><li class="link ulchildlink"><strong><a href="../topics/hive_drop_external_table_data.html">Drop an external table along with data</a></strong><br>When you run DROP TABLE on an external table, by default Hive drops only the metadata         (schema). If you want the DROP TABLE command to also remove the actual data in the external         table, as DROP TABLE does on a managed table, you need to configure the table properties         accordingly.</li><li class="link ulchildlink"><strong><a href="../topics/hive-create-s3-based-table.html">Create an S3-based table</a></strong><br>In Cloudera Data Platform sets up S3Guard for you when you create a table. In         CDP Data Center, you need to set up S3Guard before creating an external table having a         data source located on S3. This action prevents data inconsistency caused by the S3 eventual         consistency model. </li><li class="link ulchildlink"><strong><a href="../topics/hive_constraints.html">Using constraints</a></strong><br>You can use DEFAULT, PRIMARY KEY, FOREIGN KEY, and NOT NULL constraints in Hive ACID   table definitions to improve the performance, accuracy, and reliability of data.</li><li class="link ulchildlink"><strong><a href="../topics/hive_table_type.html">Determine the table type</a></strong><br>You can determine the type of a Hive table, whether it has ACID properties, the         storage format, such as ORC, and other information. Knowing the table type is important for         a number of reasons, such as understanding how to store data in the table or to complete         remove data from the cluster.</li></ul></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>