<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="task"><meta name="description" content="Hive automatically and periodically discovers discrepancies in partition metadata in the Hive metastore and corresponding directories or objects on the file system, and then performs synchronization. This operation is often automated for processing log data or data in Spark and Hive catalogs."><meta name="DC.Relation" scheme="URI" content="../topics/hive-manage-partitions.html"><meta name="DC.Relation" scheme="URI" content="../topics/hive-create_partitions_dynamically.html"><meta name="DC.Relation" scheme="URI" content="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-DiscoverPartitions"><meta name="prodname" content="Data Access"><meta name="version" content="3"><meta name="release" content="1"><meta name="modification" content="0"><meta name="brand" content="Data Platform"><meta name="rights" content="© 2019, 2018, 2017, 2016 Cloudera, Inc."><meta name="DC.Date.Created" content="2018-07-12"><meta name="DC.Date.Modified" content="2018-07-12"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive-automate-partition-management-msck"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Automate partition discovery and repair</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
    <h1 class="title topictitle1" id="ariaid-title1">Automate partition discovery and repair</h1>
    
    <div class="body taskbody"><p class="shortdesc">Hive automatically and periodically discovers discrepancies in partition metadata in
        the Hive metastore and corresponding directories or objects on the file system, and then
        performs synchronization. This operation is often automated for processing log data or data
        in Spark and Hive catalogs. </p>
        <section class="section context">
            
            <p class="p">The <code class="ph codeph">discover.partitions</code> table property enables and disables
                synchronization of the file system with partitions. In external partitioned tables, this
                property is enabled (<code class="ph codeph">true</code>) by default when you create the table. To a legacy external table (created using a version of Hive that does not support this feature), you need to add <code class="ph codeph">discover.partitions</code> to the table properties to enable
                partition discovery.</p>
            
            <p class="p">By default, the discovery and synchronization of partitions occurs every 5 minutes,
                but you can configure the frequency as shown in this task.</p>
                  </section>
        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Assuming you have an external table created using a version of Hive that does not support partition discovery, enable partition discovery for the table.</span>
                <div class="itemgroup stepxmp"><pre class="pre codeblock"><code>ALTER TABLE exttbl SET TBLPROPERTIES ('discover.partitions' = 'true');</code></pre></div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Set synchronization of partitions to occur every 10 minutes expressed in
                    seconds: Set <code class="ph codeph">metastore.partition.management.task.frequency</code> to
                    600.</span>
            </li></ol>
    </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/hive-manage-partitions.html" title="You can discover partition changes and synchronize Hive metadata automatically. Performing synchronization automatically as opposed to manually can save substantial time, especially when partitioned data, such as logs, changes frequently. You can also configure how long to retain partition data and metadata.">Manage partitions automatically</a></div></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="../topics/hive-create_partitions_dynamically.html" title="You can configure Hive to create partitions dynamically and then run a query that creates the related directories on the file system, such as S3. Hive then separates the data into the directories.">Create partitions dynamically</a></div><div><a class="link" href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-DiscoverPartitions" target="_blank">Apache Wiki: Discover Partitions and Partition Retention</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>