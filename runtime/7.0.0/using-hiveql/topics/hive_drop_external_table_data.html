<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="task"><meta name="description" content="When you run DROP TABLE on an external table, by default Hive drops only the metadata (schema). If you want the DROP TABLE command to also remove the actual data in the external table, as DROP TABLE does on a managed table, you need to configure the table properties accordingly."><meta name="DC.Relation" scheme="URI" content="../topics/hive_hive_3_tables.html"><meta name="prodname" content="Data Access"><meta name="version" content="3"><meta name="release" content="1"><meta name="modification" content="0"><meta name="brand" content="Data Platform"><meta name="rights" content="© 2019, 2018, 2017, 2016 Cloudera, Inc."><meta name="DC.Date.Created" content="2018-07-12"><meta name="DC.Date.Modified" content="2018-07-12"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_drop_external_table_data"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>Drop an external table along with data</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
    <h1 class="title topictitle1" id="ariaid-title1">Drop an external table along with data</h1>
    
    <div class="body taskbody"><p class="shortdesc">When you run DROP TABLE on an external table, by default Hive drops only the metadata
        (schema). If you want the DROP TABLE command to also remove the actual data in the external
        table, as DROP TABLE does on a managed table, you need to configure the table properties
        accordingly.</p>
        
        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Create a CSV file of data you want to query in Hive.</span>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Launch Beeline to start Hive.</span>
                <div class="itemgroup stepxmp">For example: <pre class="pre codeblock"><code>beeline -u jdbc:hive2://myhiveserver.com:10000 -n hive -p</code></pre></div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Create an external table to store the CSV data, configuring the table so you can drop it along with the data.</span>
                <div class="itemgroup stepxmp"><pre class="pre codeblock"><code>CREATE EXTERNAL TABLE IF NOT EXISTS names_text(
  a INT, b STRING)
  ROW FORMAT DELIMITED
  FIELDS TERMINATED BY ','
  STORED AS TEXTFILE
  LOCATION 's3a://andrena'
  TBLPROPERTIES ('external.table.purge'='true');          </code></pre></div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Run DROP TABLE on the external table.</span>
                <div class="itemgroup stepxmp"><pre class="pre codeblock"><code>DROP TABLE names_text;</code></pre></div>
                <div class="itemgroup stepresult">The table is removed from Hive Metastore and the data stored externally.
                    For example, <code class="ph codeph">names_text</code> is removed from the Hive Metastore and the CSV file that
                    stored the data is also deleted from HDFS.</div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Prevent data in external table from being deleted by a DROP TABLE statement.</span>
                <div class="itemgroup stepxmp"><pre class="pre codeblock"><code>ALTER TABLE addresses_text SET TBLPROPERTIES ('external.table.purge'='false');</code></pre></div>
            </li></ol>
    </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/hive_hive_3_tables.html" title="You can create a Hive-managed table or an external table. Hive does not fully control an external table, and you can keep the data source for this type of table outside the Hive metastore.">Apache Hive 3 tables</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>