<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="task"><meta name="description" content="As a Hive administrator, you can get troubleshooting information about locks on a table, partition, or schema."><meta name="DC.Relation" scheme="URI" content="../topics/cr-hive_acid_operations.html"><meta name="DC.Relation" scheme="URI" content="https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions#HiveTransactions-Configuration"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_view_transaction_locks"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>View transaction locks</title><script type="application/javascript">
      
      
    //The id for tree cookie
    var treeCookieId = "treeview-bk_release-notes";
    var language = "en";
    var w = new Object();
    //Localization
    txt_filesfound = 'Results';
    txt_enter_at_least_1_char = "You must enter at least one character.";
    txt_browser_not_supported = "Please enable JavaScript.";
    txt_please_wait = "Please wait. Search in progress...";
    txt_results_for = "Results for: ";
    
    
    </script><script type="application/javascript" src="https://code.jquery.com/jquery-1.4.3.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery-ui-1.8.2.custom.min.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.cookie.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/jquery.treeview.min.js"></script><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"><script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js" type="application/javascript"></script><script type="application/javascript" src="/common/js/navigation.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/main.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/htmlFileInfoList.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/nwSearchFnt.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/en_stemmer.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-1.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-2.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/index-3.js"></script><script type="application/javascript">
      
      
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-22950817-19', 'auto');
    ga('send', 'pageview');
    
    
    </script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/plugins.js"></script><script type="application/javascript" src="/common/themes/pre-hdp-3.1/js/scripts.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" type="application/javascript"></script><script type="application/javascript">
      
    // PAGE SPECIFIC SCRIPTS
    
    $('.chapters>li .dropdown').click(function () {
    var $arrow = $(this).find('i.fa');
    if( $arrow.hasClass('fa-chevron-down')) {
    $(this).siblings('.sections').show();
    $arrow.removeClass('fa-chevron-down').addClass('fa-chevron-up');
    } else {
    console.log('up');
    $(this).siblings('.sections').hide();
    $arrow.removeClass('fa-chevron-up').addClass('fa-chevron-down');
    }
    });
    
    //  $('h3').on('mouseenter',function() {
    //      console.log('received mouseover');
    //      $(this).find('.hash-link').show();
    //  });
    
    //  $('h3').on('mouseleave',function() {
    //      $(this).find('.hash-link').hide();
    //  });
    
    
    // STICKY SIDEBARs
    var stickySidebar = $('.sticky');
    
    if (stickySidebar.length > 0) {
    var stickyHeight = stickySidebar.height(),
    sidebarTop = stickySidebar.offset().top;
    }
    
    // on scroll move the sidebar
    $(window).scroll(function () {
    if (stickySidebar.length > 0) {
    var scrollTop = $(window).scrollTop();
    console.log
    
    if (sidebarTop < scrollTop) {
    stickySidebar.css('top', scrollTop - sidebarTop);
    
    // stop the sticky sidebar at the footer to avoid overlapping
    var sidebarBottom = stickySidebar.offset().top + stickyHeight,
    stickyStop = $('.main-content').offset().top + $('.main-content').height();
    if (stickyStop < sidebarBottom) {
    var stopPosition = $('.main-content').height() - stickyHeight;
    stickySidebar.css('top', stopPosition);
    }
    }
    else {
    stickySidebar.css('top', '0');
    }
    }
    });
    
    $(window).resize(function () {
    if (stickySidebar.length > 0) {
    stickyHeight = stickySidebar.height();
    }
    });
    
    // Initialize Syntax Highlighting
    hljs.initHighlightingOnLoad();
    
    </script><style type="text/css">
      
      
    input {
    margin-bottom: 5px;
    margin-top: 2px;
    }
    
    .folder {
    display: block;
    height: 22px;
    padding-left: 20px;
    background: transparent url(/common/themes/pre-hdp-3.1/images/folder.gif) 0 0px no-repeat;
    }
    
    </style><link href="/common/themes/pre-hdp-3.1/images/favicon.ico" rel="icon" type="image/x-icon" sizes="16x16"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-70x70.png" rel="icon" type="image/x-icon" sizes="32x32"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="icon" type="image/x-icon" sizes="192x192"><link href="https://hortonworks.com/wp-content/uploads/2016/04/cropped-favicon521x512-300x300.png" rel="apple-touch-icon-precomposed" type="image/x-icon" sizes="192x192"><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css" rel="stylesheet"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/main.css"><link rel="stylesheet" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/docux.css"><style type="text/css"></style><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery-ui-1.8.2.custom.css"><link rel="stylesheet" type="text/css" media="screen, projection" href="/common/themes/pre-hdp-3.1/css/jquery.treeview.css"><link href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" rel="stylesheet" type="text/css" media="screen, projection"></head><body class="docs books"><div id="body_container"><div class="breadcrumb_bg"><!-- --></div><div id="navbar"><section class="ps topstrip"><div><!-- --></div></section></div><div id="mainbody"><section class="ps titlebar"><div><div class="breadcrumb"><a href="/">Hortonworks Docs</a> » <a id="index_page" href="../../index.html">Cloudera Runtime 1.0.0</a> » <span class="current_book">Managing Apache Hive</span></div><div class="book_title">Managing Apache Hive</div><div class="ebooks"><div class="formats"><span class="desc">Also available as:</span><div class="format"><a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" title="Download a PDF of this document" class="pdficon" href="../cr-hive_managing_hive.pdf"><img src="/common/themes/pre-hdp-3.1/images/pdf.png" alt="PDF"></a></div></div></div></div></section><div class="lowerbody"><section class="ps doc-content"><div><div class="aside left"><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div class="ui-tabs ui-widget ui-widget-content ui-corner-all"><div id="treeDiv" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><img src="/common/themes/pre-hdp-3.1/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li><a href="../topics/cr-hive_acid_operations.html">ACID operations</a><ul><li><a href="../topics/cr-hive_configure_partitions_in_hive.html">Configure partitions for transactions</a></li><li><a href="../topics/cr-hive_view_hive_transactions.html">View transactions</a></li><li class="active"><a href="../topics/cr-hive_view_transaction_locks.html">View transaction locks</a></li></ul></li><li><a href="../topics/cr-hive_vectorized_query_execution.html">Query vectorization</a><ul><li><a href="../topics/cr-hive_enable_vectorization.html">Enable vectorization</a></li><li><a href="../topics/cr-hive_check_query_execution.html">Check query execution</a></li></ul></li></ul></div></div></div></div></div><div class="formats"><div class="pdf"><!-- --></div></div></div><div class="next-prev-links"></div><div id="content" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">View transaction
      locks</h1>
   
   <div class="body taskbody"><p class="shortdesc">As a Hive administrator, you can get troubleshooting information about locks on a table, partition, or schema.</p>
      <section class="section context">Hive transactions, enabled by default, disables Zookeeper locking. DbLockManager
         stores and manages all transaction lock information in the Hive Metastore. Heartbeats are
         sent regularly from lock holders and transaction initiators to the Hive Metastore to
         prevent stale locks and transactions. The lock or transaction is aborted if the metastore
         does not receive a heartbeat within the amount of time specified by the
            <code class="ph codeph">hive.txn.timeout</code> configuration property. </section>
      <div class="section prereq p">You ensured that transactions are enabled (the default).
      </div>
      <ol class="ol steps"><li class="li step stepexpand">
            <span class="ph cmd">Enter a Hive query to check table locks.</span>
            <div class="itemgroup stepxmp">
               <pre class="pre codeblock"><code>SHOW LOCKS mytable EXTENDED;         </code></pre>
            </div>
         </li><li class="li step stepexpand">
            <span class="ph cmd">Check partition locks.</span>
            <div class="itemgroup stepxmp">
               <pre class="pre codeblock"><code>SHOW LOCKS mytable PARTITION(ds='2018-05-01', hr='12') EXTENDED;</code></pre>
            </div>
         </li><li class="li step stepexpand">
            <span class="ph cmd">Check schema locks.</span>
            <div class="itemgroup stepxmp">
               <pre class="pre codeblock"><code>SHOW LOCKS SCHEMA mydatabase;</code></pre>
            </div>
            <div class="itemgroup info">The following information appears in the output unless ZooKeeper or in-memory lock
               managers are used.</div>
            <div class="itemgroup stepresult">
               <ul class="ul">
                  <li class="li">Database name</li>
                  <li class="li">Table name</li>
                  <li class="li">Partition, if the table is partitioned</li>
                  <li class="li">Lock state: <ul class="ul">
                        <li class="li">Acquired - transaction initiator hold the lock</li>
                        <li class="li">Waiting - transaction initiator is waiting for the lock</li>
                        <li class="li">Aborted - the lock has timed out but has not yet been cleaned</li>
                     </ul></li>
                  <li class="li">Lock type: <ul class="ul">
                        <li class="li">Exclusive - the lock cannot be shared</li>
                        <li class="li">Shared_read - the lock cannot be shared with any number of other
                           shared_read locks</li>
                        <li class="li">Shared_write - the lock may be shared by any number of other shared_read
                           locks but not with other shared_write locks</li>
                     </ul></li>
                  <li class="li">Transaction ID associated with the lock, if one exists</li>
                  <li class="li">Last time lock holder sent a heartbeat</li>
                  <li class="li">Time the lock was acquired, if it has been acquired</li>
                  <li class="li">Hive user who requested the lock</li>
                  <li class="li">Host machine on which the Hive user is running a Hive client</li>
                  <li class="li">
                     <code class="ph codeph">Blocked
                        By</code> ID - ID of the lock causing current lock to be in Waiting mode,
                     if the lock is in this mode </li>
               </ul>
            </div>
         </li></ol>
     </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/cr-hive_acid_operations.html" title="You can perform ACID (atomicity, consistency, isolation, and durability) v2 transactions at the row level without any configuration. By default, managed tables are ACID tables. You cannot disable transactions.">ACID operations</a></div></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions#HiveTransactions-Configuration" target="_blank">Apache wiki transaction configuration documentation</a></div></div></nav></div></div></section></div></div></div><section class="ps footer"><div><div class="copyright">© 2012–2019, Hortonworks, Inc.</div><div class="license">Document licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">Creative
          Commons Attribution ShareAlike 4.0 License</a>.</div><div class="menulinks"><a href="https://hortonworks.com">Hortonworks.com</a> | 
          <a href="#">Documentation</a> |
          <a href="https://hortonworks.com/support/">Support</a> |
          <a href="https://community.hortonworks.com/">Community</a></div></div></section></body></html>