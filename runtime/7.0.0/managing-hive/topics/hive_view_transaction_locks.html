<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="task"><meta name="description" content="As a Hive administrator, you can get troubleshooting information about locks on a table, partition, or schema."><meta name="DC.Relation" scheme="URI" content="../topics/hive_acid_operations.html"><meta name="DC.Relation" scheme="URI" content="https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions#HiveTransactions-Configuration"><meta name="prodname" content="Cloudera Runtime"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="brand" content="Cloudera Runtime"><meta name="rights" content="© 2019 Cloudera, Inc."><meta name="DC.Date.Created" content="2019-04-15"><meta name="DC.Date.Modified" content="2019-04-15"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="hive_view_transaction_locks"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css"><link rel="stylesheet" href="/common/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><title>View transaction locks</title></head><body class="hg"><header class="chead"><div class="breadcrumbs">
<span class="bread-home"><a href="/"><i class="fas fa-home"></i><span class="text-home">Cloudera Docs</span></a></span>
<span class="bread-product"></span>
<span class="bread-version"></span>
<span class="bread-category">Category</span></div>
<div class="search"><i class="search-close fas fa-times"></i><input type="text" placeholder="Search Documentation"><i class="fas fa-search"></i></div><div class="launch-search"><i class="fas fa-search"></i></div><div class="launch-pubnav"><i class="fas fa-bars"></i></div></header><main class="cmain"><div class="cpage"><article class="maincontent"><div class="inner-breadcrumbs">Concepts</div><div id="content" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">View transaction
      locks</h1>
   
   <div class="body taskbody"><p class="shortdesc">As a Hive administrator, you can get troubleshooting information about locks on a table, partition, or schema.</p>
      <section class="section context">Hive transactions, enabled by default, disables Zookeeper locking. DbLockManager
         stores and manages all transaction lock information in the Hive Metastore. Heartbeats are
         sent regularly from lock holders and transaction initiators to the Hive Metastore to
         prevent stale locks and transactions. The lock or transaction is aborted if the metastore
         does not receive a heartbeat within the amount of time specified by the
            <code class="ph codeph">hive.txn.timeout</code> configuration property. </section>
      <div class="section prereq p">You ensured that transactions are enabled (the default).
      </div>
      <ol class="ol steps"><li class="li step stepexpand">
            <span class="ph cmd">Enter a Hive query to check table locks.</span>
            <div class="itemgroup stepxmp">
               <pre class="pre codeblock"><code>SHOW LOCKS mytable EXTENDED;         </code></pre>
            </div>
         </li><li class="li step stepexpand">
            <span class="ph cmd">Check partition locks.</span>
            <div class="itemgroup stepxmp">
               <pre class="pre codeblock"><code>SHOW LOCKS mytable PARTITION(ds='2018-05-01', hr='12') EXTENDED;</code></pre>
            </div>
         </li><li class="li step stepexpand">
            <span class="ph cmd">Check schema locks.</span>
            <div class="itemgroup stepxmp">
               <pre class="pre codeblock"><code>SHOW LOCKS SCHEMA mydatabase;</code></pre>
            </div>
            <div class="itemgroup info">The following information appears in the output unless ZooKeeper or in-memory lock
               managers are used.</div>
            <div class="itemgroup stepresult">
               <ul class="ul">
                  <li class="li">Database name</li>
                  <li class="li">Table name</li>
                  <li class="li">Partition, if the table is partitioned</li>
                  <li class="li">Lock state: <ul class="ul">
                        <li class="li">Acquired - transaction initiator hold the lock</li>
                        <li class="li">Waiting - transaction initiator is waiting for the lock</li>
                        <li class="li">Aborted - the lock has timed out but has not yet been cleaned</li>
                     </ul></li>
                  <li class="li">Lock type: <ul class="ul">
                        <li class="li">Exclusive - the lock cannot be shared</li>
                        <li class="li">Shared_read - the lock cannot be shared with any number of other
                           shared_read locks</li>
                        <li class="li">Shared_write - the lock may be shared by any number of other shared_read
                           locks but not with other shared_write locks</li>
                     </ul></li>
                  <li class="li">Transaction ID associated with the lock, if one exists</li>
                  <li class="li">Last time lock holder sent a heartbeat</li>
                  <li class="li">Time the lock was acquired, if it has been acquired</li>
                  <li class="li">Hive user who requested the lock</li>
                  <li class="li">Host machine on which the Hive user is running a Hive client</li>
                  <li class="li">
                     <code class="ph codeph">Blocked
                        By</code> ID - ID of the lock causing current lock to be in Waiting mode,
                     if the lock is in this mode </li>
               </ul>
            </div>
         </li></ol>
     </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/hive_acid_operations.html" title="You can perform ACID (atomicity, consistency, isolation, and durability) v2 transactions at the row level without any configuration. By default, managed tables are ACID tables. You cannot disable transactions.">ACID operations</a></div></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions#HiveTransactions-Configuration" target="_blank">Apache wiki transaction configuration documentation</a></div></div></nav></div></article><div class="short-prev"><a href="">«</a></div><div class="short-next"><a href="">»</a></div><div class="up"></div><div class="prev"><a href="">« Getting Started with Apache Nifi</a></div><div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div></div><aside class="pubmenu"><div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div><nav class="ctoc"></nav></aside></main><div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div><nav class="product-drawer"><div class="full-logo"><img src="/common/img/cloudera.png"></div><ul class="products"><li class="cat">Data Platforms</li><li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li><li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li><li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li><li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li><li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li><li class="cat">Data Services</li><li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li><li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li><li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li><li class="cat">Cloud Services</li><li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li><li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li></ul><div class="open-close">»</div></nav><footer></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script><script src="/common/js/main.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script></body></html>