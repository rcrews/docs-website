<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="copyright" content="(C) Copyright 2019">
<meta name="DC.rights.owner" content="(C) Copyright 2019">
<meta name="DC.Type" content="concept">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="cmug_topic_10">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.css">
<link rel="stylesheet" href="/common/css/main.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
<title>Events</title>
</head>
<body class="hg">
<header class="chead">
<div class="breadcrumbs"><span class="bread-home"><a href="/"><span class="text-home">Cloudera Docs</span></a></span> <span class="bread-category">Category</span></div>
<div class="search"><input type="text" placeholder="Search Documentation"></div>
<div class="launch-search"></div>
<div class="launch-pubnav"></div>
</header>
<main class="cmain">
<div class="cpage">
<article class="maincontent">
<div class="inner-breadcrumbs">Concepts</div>

<div id="content" aria-labelledby="ariaid-title1">
    <h1 class="title topictitle1" id="ariaid-title1">Create a resource plan</h1>

    <div class="body taskbody"><p class="shortdesc">As administrator, you can create resource plans that configure your cluster for
        different conditions, enabling you to improve parallel query execution and share queries on
        nodes running LLAP. You can allocate resources to a pool of users, groups, or applications and trigger actions in a plan.</p>
        <div class="section prereq p">You started Hive from the Beeline shell, opened DAS, or opened another Hive UI.</div>
        <section class="section context">
            <p class="p">As administrator, you can either create a new resource plan or clone another plan and
                then modify it.</p>
        </section>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">Create a resource plan.</span>
                <ul class="ul choices">
                    <li class="li choice">Create a new resource plan (for example, one named
                        high_concurr_rp):<pre class="pre codeblock"><code>CREATE RESOURCE PLAN high_concurr_rp;</code></pre></li>
                    <li class="li choice">Clone an existing resource plan (for example, ha_plan) and rename it
                        high_concurr_rp:<pre class="pre codeblock"><code>CREATE RESOURCE PLAN high_concurr_rp LIKE ha_plan;</code></pre></li>
                    <li class="li choice">Create a new resource plan (for example, named high_concurr_rp) and
                        specify a query concurrency
                        limit:<pre class="pre codeblock"><code>CREATE RESOURCE PLAN high_concurr_rp WITH QUERY_PARALLELISM=15;</code></pre></li>
                </ul>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Optionally, add one or more query pools to the plan.</span>
                <div class="itemgroup stepxmp">
                    <pre class="pre codeblock"><code>CREATE POOL high_concurr_rp.bi_pool
WITH ALLOC_FRACTION=75,QUERY_PARALLELISM=5;

CREATE POOL high_concurr_rp.etl_pool
WITH ALLOC_FRACTION=25,QUERY_PARALLELISM=10;              </code></pre>
                </div>
                <div class="itemgroup info">This example configuration allocates 75 percent of the LLAP cluster resources
                    to one pool and 25 percent to the other, and allows 5 concurrent queries by
                    users in one pool and 10 concurrent queries by users in the other.</div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Optionally, map an application to a pool.</span>
                <div class="itemgroup stepxmp">
                    <pre class="pre codeblock"><code>CREATE APPLICATION MAPPING tableau_to_bi IN bi_pool;             </code></pre>
                </div>
                <div class="itemgroup info">This example mapping of the Tableau application to the bi_pool requires
                    Tableau to connect to HiveServer using a JDBC connection string that includes
                        <code class="ph codeph">applicationName="Tableau"</code>. In a mapping of a group to a
                    pool, group authorization depends on the HDFS group configuration on the
                    cluster. You can configure Lightweight Directory Protocol (LDAP) and other
                    mechanisms. </div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">Optionally, create a trigger. For example, create a trigger that moves a query
                    to the etl_pool for execution when the execution time exceeds one minute.</span>
                <div class="itemgroup stepxmp">
                    <pre class="pre codeblock"><code>CREATE TRIGGER high_concurr_rp.slow_query
WHEN execution_time_ms &gt; 60000
DO MOVE TO etl_pool;                </code></pre>
                </div>
            </li><li class="li step stepexpand">
                <span class="ph cmd">If you are running the LLAP service, add a trigger to the pool or resource plan
                    as shown in the following example.</span>
                <div class="itemgroup stepxmp"><code class="ph codeph">ADD TRIGGER high_concurr_rp.slow_query ADD TO POOL
                        bi_pool;</code></div>
                <div class="itemgroup info">You must add a trigger to a pool or resource plan when running under LLAP;
                    otherwise, the trigger is considered global and runs only in Tez.</div>
            </li></ol>
    </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/cr-hive_setting_up_and_using_a_resource_plan.html" title="Understanding the prerequisites for using workload management is critical. Prerequisites are running LLAP and setting up a YARN queue for workload management in addition to the LLAP queue. As administrator, you can define a resource plan using HiveQL DDL statements that typically include event-triggered resource pools for different users or applications. You can then manage workloads using the resource plan. After creating and enabling a resource plan, you must activate it. When you want to alter a resource plan or stop using it, you must disable it.">Setting up and using a resource plan</a></div></div><div class="linklist relinfo"><strong>Related information</strong><br><div><a class="link" href="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hive-workload-commands/content/hive_create_mapping.html" target="_blank">CREATE MAPPING</a></div><div><a class="link" href="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hive-workload-commands/content/hive_create_pool.html" target="_blank">CREATE POOL</a></div><div><a class="link" href="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hive-workload-commands/content/hive_create_trigger.html" target="_blank">CREATE TRIGGER</a></div><div><a class="link" href="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hive-workload-commands/content/hive_workload_management_command_summary.html" target="_blank">Hive Workload Management Command Summary</a></div><div><a class="link" href="http://docs-dev.cloudera.com.s3.amazonaws.com/HDPDocuments/CR/CR-master/hive-workload-commands/content/hive_workload_trigger_counters.html" target="_blank">Workload trigger counters</a></div></div></nav></div>

</article>
<div class="short-prev"><a href="">«</a></div>
<div class="short-next"><a href="">»</a></div>
<div class="up"></div>
<div class="prev"><a href="">« Getting Started with Apache Nifi</a></div>
<div class="next">Getting Started: <a href="">Terminology Used in This Guide »</a></div>
</div>
<aside class="pubmenu">
<div class="product-title"><img class="product-logo" src="/common/img/smaller_icons/icon-hdf.png"><span class="product-name">Cloudera Data Platform</span></div>
<nav class="ctoc"></nav>
</aside>
</main>
<div class="logo"><a href="/"><img src="//www.cloudera.com/apps/settings/wcm/designs/www/clientlibs/css/assets/icons/favicon/apple-touch-icon-152x152.png"></a></div>
<nav class="product-drawer">
<div class="full-logo"><img src="/common/img/cloudera.png"></div>
<ul class="products">
<li class="cat">Data Platforms</li>
<li><img src="/common/img/mini_icons/icon-ambari.png"><span class="text">Ambari</span></li>
<li><img src="/common/img/mini_icons/icon-hdp.png"><span class="text">Data Platform</span></li>
<li class="active"><img src="/common/img/mini_icons/icon-hdf.png"><span class="text">Dataflow</span></li>
<li><img src="/common/img/mini_icons/icon-smartsense.png"><span class="text">Smartsense</span></li>
<li><img src="/common/img/mini_icons/icon-cybersecurity.png"><span class="text">Cybersecurity</span></li>
<li class="cat">Data Services</li>
<li><img src="/common/img/mini_icons/icon-dataplane.png"><span class="text">DataPlane Core</span></li>
<li><img src="/common/img/mini_icons/icon-studio.png"><span class="text">Data Analytics Studio</span></li>
<li><img src="/common/img/mini_icons/icon-datasteward.png"><span class="text">Data Steward Studio</span></li>
<li class="cat">Cloud Services</li>
<li><img src="/common/img/mini_icons/icon-cloudbreak.png"><span class="text">Cloudbreak</span></li>
<li><img src="/common/img/mini_icons/icon-hdcloud.png"><span class="text">HDCloud for AWS</span></li>
</ul>
<div class="open-close">»</div>
</nav>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/common/js/main.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js" class="test"></script>
</body>
</html>
