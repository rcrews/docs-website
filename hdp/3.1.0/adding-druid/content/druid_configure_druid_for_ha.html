<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i%7cRoboto+Condensed:300,300i,400,400i,700,700i%7cRoboto+Mono:400,400i,700,700i%7cRoboto+Slab:400,400i,700,700i" rel="stylesheet"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous"><title>Configure Apache Druid for high availability</title><meta name="description" content="To make Apache Druid (incubating) highly available, you need to configure a sophisticated, multinode structure."><link rel="stylesheet" href="/common/css/main.css"><script src="/common/js/main.js"></script></head><body class="hg"><article class="hg-body"><main><div id="content" aria-labelledby="ariaid-title1">
    <h1 class="title topictitle1" id="ariaid-title1">Configure Apache Druid for high availability</h1>
    
    <div class="body taskbody"><p class="shortdesc">To make Apache Druid (incubating) highly available, you need to configure a
        sophisticated, multinode structure.</p>
        <section class="section context">
            <p class="p">The architecture of a Druid cluster includes a number of nodes, two of which are
                designated Overlord and Coordinator. Within each Overlord and Coordinator domain,
                ZooKeeper determines which node is the Active node. The other nodes supporting each
                process are in Standby state until an Active node stops running and the Standby
                nodes receive the failover. Multiple Historical and Realtime nodes also serve to
                support a failover mechanism. But for Broker and Realtime processes, there are no
                designated Active and Standby nodes. Muliple instances of Druid Broker processes are
                required for HA. Recommendations: Use an external, virtual IP address or load
                balancer to direct user queries to multiple Druid Broker instances. A Druid Router
                can also serve as a mechanism to route queries to multiple broker nodes.</p>
        </section>
        <div class="section prereq p">
            <ul class="ul">
            <li class="li">You ensured that no local storage is used.</li>
               <li class="li"> You installed MySQL or Postgres as the metadata storage layer. You cannot use Derby because it does not support a multinode cluster with HA.</li>
                <li class="li">You configured your MySQL or Postgres metadata storage for HA mode to avoid
                    outages that impact cluster operations. See your database documentation for more
                    information.</li>
            <li class="li">You planned to dedicate at least three ZooKeeper nodes to HA mode. </li>
            </ul>
        </div>
        <ol class="ol steps"><li class="li step">
                <span class="ph cmd">In Ambari, enable Namenode High Availability using the Ambari wizard. See
                    Ambari documentation for more information.</span>
            </li><li class="li step">
                <span class="ph cmd">Install the Druid Overlord, Coordinator, Broker, Realtime, and Historical processes on multiple nodes that are distributed among different hardware servers.</span>
            </li><li class="li step">
                <span class="ph cmd">Ensure that the replication factor for each data source is greater than 1 in
                    the Coordinator process rules. If you did not change data source rule
                    configurations, no action is required because the default replication factor is
                    2.</span>
            </li></ol>
    </div>
</div></main><nav class="products"></nav><nav class="topics"></nav><aside class="right-info"></aside></article><header></header><footer></footer><div class="modal fade" id="bModal" tabindex="-1" role="dialog" aria-labelledby="bModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="bModalLabel"></h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">✖️</span></button></div><div class="modal-body" id="bModalList"></div></div></div></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script></body></html>